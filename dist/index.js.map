{"version":3,"file":"index.js","sources":["../src/components/bbox/Bbox.tsx","../src/components/viewerContext/ViewerContext.tsx","../src/components/pdfPage/PdfPage.tsx","../src/components/pdfDocument/PdfDocument.tsx","../src/services/bboxService.ts","../src/index.tsx"],"sourcesContent":["import React, {FC, memo, useMemo} from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport './bbox.scss';\r\n\r\nexport interface IBbox {\r\n  location: (number | string)[];\r\n  linked?: { page: number, index: number };\r\n  index: number;\r\n}\r\n\r\ninterface IBboxProps {\r\n  bbox: IBbox;\r\n  scale: number;\r\n  selected?: boolean;\r\n  onClick?(e: any): void;\r\n}\r\n\r\ninterface IBboxDivProps {\r\n  left: string;\r\n  bottom: string;\r\n  width: string;\r\n  height: string;\r\n  top?: string;\r\n}\r\n\r\nconst BboxDiv = styled.div`\r\n  left: ${(props: IBboxDivProps) => props.left};\r\n  bottom: ${(props: IBboxDivProps) => props.bottom};\r\n  height: ${(props: IBboxDivProps) => props.height};\r\n  width: ${(props: IBboxDivProps) => props.width};;\r\n  top: ${(props: IBboxDivProps) => props.top};\r\n`;\r\n\r\nconst Bbox: FC<IBboxProps> = (props) => {\r\n  const [left, bottom, width, height, top] = useMemo(() => {\r\n    return [\r\n      (parseFloat(props.bbox.location[0] as string) * props.scale) + 'px',\r\n      (props.bbox.location[3] === 'bottom'\r\n        ? '0'\r\n        : (parseFloat(props.bbox.location[1] as string) * props.scale) + 'px'),\r\n      (parseFloat(props.bbox.location[2] as string) * props.scale) + 'px',\r\n      (props.bbox.location[3] === 'top'\r\n        ? 'auto'\r\n        : (parseFloat(props.bbox.location[3] as string) * props.scale) + 'px'),\r\n      props.bbox.location[3] === 'top'\r\n        ? '0' : props.bbox.location[3] === 'bottom'\r\n        ? `calc(100% - ${parseFloat(props.bbox.location[1] as string) * props.scale}px)`\r\n        : 'auto',\r\n    ]\r\n  } ,[props.bbox.location]);\r\n\r\n  return <BboxDiv className={`pdf-bbox ${props.selected && 'pdf-bbox_selected'}`}\r\n                  left={left}\r\n                  bottom={bottom}\r\n                  width={width}\r\n                  height={height}\r\n                  top={top}\r\n                  onClick={props.onClick}\r\n  />;\r\n};\r\n\r\nexport default memo(Bbox);\r\n","import React, {FC, createContext, useState } from 'react';\r\n\r\nexport const ViewerContext = createContext({} as {\r\n  page: number,\r\n  setPage(page: number): void,\r\n  maxPage: number,\r\n  setMaxPage(page: number): void,\r\n  scrollIntoPage: number,\r\n  setScrollIntoPage(page: number): void,\r\n});\r\n\r\nconst ViewerProvider: FC = (props) => {\r\n  const [page, setPage] = useState(1);\r\n  const [scrollIntoPage, setScrollIntoPage] = useState<number>(0);\r\n  const [maxPage, setMaxPage] = useState(0);\r\n\r\n  const context = {\r\n    page,\r\n    setPage,\r\n    maxPage,\r\n    setMaxPage,\r\n    scrollIntoPage,\r\n    setScrollIntoPage,\r\n  };\r\n\r\n  return <ViewerContext.Provider value={context}>{props.children}</ViewerContext.Provider>;\r\n};\r\n\r\nexport default ViewerProvider;\r\n","import React, {FC, useCallback, useState, useRef, memo, useEffect, useContext,} from 'react';\r\nimport { Page } from 'react-pdf';\r\nimport { useIntersection } from 'use-intersection';\r\nimport styled from 'styled-components';\r\n\r\nimport Bbox, {IBbox} from '../bbox/Bbox';\r\nimport { IPageProps } from './IPageProps';\r\nimport {ViewerContext} from '../viewerContext/ViewerContext';\r\n\r\nimport './pdfPage.scss';\r\n\r\ninterface IPdfPageProps extends IPageProps {\r\n  bboxList?: IBbox[];\r\n  defaultHeight?: number;\r\n  defaultWidth?: number;\r\n  onPageInViewport?(page: number, data: { isIntersecting?: boolean, intersectionRatio?: number }): void;\r\n}\r\n\r\nconst StyledPdfPage = styled.div`\r\n  min-height: ${(props: { height?: number, width?: number, scale: number }) => props.height ? props.height*props.scale + 'px' : 'auto'};\r\n  min-width: ${(props: { height?: number, width?: number, scale: number }) => props.width ? props.width*props.scale + 'px' : 'auto'};\r\n`;\r\n\r\nconst PdfPage: FC<IPdfPageProps> = (props) => {\r\n  const { scrollIntoPage } = useContext(ViewerContext);\r\n  const { bboxList = [], scale = 1 } = props;\r\n  const intersectionRef = useRef(null);\r\n  const [loaded, setLoaded] = useState(false);\r\n  const [isRendered, setIsRendered] = useState(false);\r\n  const [isIntersecting, setIsIntersecting] = useState(false);\r\n  const [intersectionRatio, setIntersectionRatio] = useState(0);\r\n  useIntersection(intersectionRef, {\r\n    threshold: [.2, .4, .5, .6, .8, 1],\r\n  }, (entry) => {\r\n    if (isIntersecting !== entry.isIntersecting) {\r\n      setIsIntersecting(entry.isIntersecting);\r\n    }\r\n    if (intersectionRatio !== entry.intersectionRatio) {\r\n      setIntersectionRatio(entry.intersectionRatio);\r\n    }\r\n  });\r\n\r\n  const onPageClick = useCallback(() => {\r\n    props.onBboxClick?.(null);\r\n  }, []);\r\n  const onBboxClick = useCallback((index) => (e: Event) => {\r\n    e.stopPropagation();\r\n    props.onBboxClick?.({ index });\r\n  }, [props.onBboxClick]);\r\n  const onPageRenderSuccess = useCallback(() => {\r\n    setIsRendered(true);\r\n    props.onPageRenderSuccess?.();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!loaded && isIntersecting) {\r\n      setLoaded(true);\r\n    }\r\n    props.onPageInViewport?.(props.page, { isIntersecting, intersectionRatio });\r\n  }, [isIntersecting, intersectionRatio, loaded])\r\n  useEffect(() => {\r\n    if (scrollIntoPage === props.page) {\r\n      (intersectionRef.current as unknown as HTMLElement)?.scrollIntoView();\r\n    }\r\n  }, [scrollIntoPage]);\r\n  const isBboxSelected = (bbox: IBbox) => props.activeBboxIndex === bbox.index;\r\n\r\n  return (\r\n    <StyledPdfPage\r\n      className=\"pdf-page pdf-page_rendered\"\r\n      data-page={props.page}\r\n      onClick={onPageClick}\r\n      height={!isRendered ? props.defaultHeight : undefined}\r\n      width={!isRendered ? props.defaultWidth : undefined}\r\n      scale={scale}\r\n      ref={intersectionRef}\r\n    >\r\n      {loaded ? <>\r\n        <Page\r\n          pageNumber={props.page}\r\n          error={props.pageError}\r\n          height={props.height}\r\n          width={props.width}\r\n          loading={props.pageLoading}\r\n          inputRef={props.inputRef}\r\n          renderAnnotationLayer={props.renderAnnotationLayer}\r\n          renderInteractiveForms={props.renderInteractiveForms}\r\n          renderTextLayer={props.renderTextLayer}\r\n          scale={props.scale}\r\n          onLoadError={props.onPageLoadError}\r\n          onLoadProgress={props.onPageLoadProgress}\r\n          onLoadSuccess={props.onPageLoadSuccess}\r\n          onRenderError={props.onPageRenderError}\r\n          onRenderSuccess={onPageRenderSuccess}\r\n          onGetAnnotationsSuccess={props.onGetAnnotationsSuccess}\r\n          onGetAnnotationsError={props.onGetAnnotationsError}\r\n          onGetTextSuccess={props.onGetTextSuccess}\r\n          onGetTextError={props.onGetTextError}\r\n        />\r\n        {isRendered ? bboxList.map((bbox: IBbox, index) => (\r\n          <Bbox key={index} bbox={bbox} onClick={onBboxClick(bbox.index)} selected={isBboxSelected(bbox)} scale={scale} />\r\n        )) : null}\r\n      </> : null}\r\n    </StyledPdfPage>\r\n  );\r\n}\r\n\r\nexport default memo(PdfPage);\r\n","import React, {FC, memo, useCallback, useMemo, useState, useContext, useEffect} from 'react';\r\nimport { Document, pdfjs } from 'react-pdf';\r\nimport { PDFDocumentProxy } from 'pdfjs-dist';\r\nimport { useDebounce } from 'react-use';\r\n\r\nimport { IDocumentProps } from './IDocumentProps';\r\nimport { IPageProps } from '../pdfPage/IPageProps';\r\nimport PdfPage from '../pdfPage/PdfPage';\r\nimport { PDFPageProxy } from 'react-pdf/dist/Page';\r\nimport { ViewerContext } from '../viewerContext/ViewerContext';\r\n\r\nimport './pdfDocument.scss';\r\nimport {IBbox} from \"../bbox/Bbox\";\r\n\r\nexport interface IPdfDocumentProps extends IDocumentProps, IPageProps {\r\n  showAllPages?: boolean;\r\n  activeBboxIndex?: number;\r\n  bboxMap?: {\r\n    [page: number]: IBbox[];\r\n  };\r\n  onPageChange?(page: number): void;\r\n}\r\n\r\nconst PdfDocument: FC<IPdfDocumentProps> = (props) => {\r\n  pdfjs.GlobalWorkerOptions.workerSrc = useMemo(() => `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`, []);\r\n  const { page, setPage, maxPage, setMaxPage, scrollIntoPage, setScrollIntoPage } = useContext(ViewerContext);\r\n  const { bboxMap = {} } = props;\r\n  const [loaded, setLoaded] = useState(false);\r\n  const [pagesByViewport, setPagesByViewport] = useState<number[]>([]);\r\n  const [ratioArray, setRatioArray] = useState<number[]>([]);\r\n  const [defaultHeight, setDefaultHeight] = useState(0);\r\n  const [defaultWidth, setDefaultWidth] = useState(0);\r\n  const shownPages: number[] = useMemo(() => {\r\n    if (props.showAllPages) {\r\n      return Array.from(\r\n        new Array(maxPage),\r\n        (_el, index) => index + 1,\r\n      );\r\n    }\r\n\r\n    return [props.page || 1];\r\n  }, [maxPage, props.showAllPages, props.page]);\r\n\r\n  const onDocumentLoadSuccess = useCallback(async (data: PDFDocumentProxy) => {\r\n    const pageData = await data.getPage(1);\r\n    setDefaultHeight(pageData.view[3]);\r\n    setDefaultWidth(pageData.view[2]);\r\n    setMaxPage(data.numPages);\r\n    setLoaded(true);\r\n\r\n    props.onLoadSuccess?.(data);\r\n  }, [props.onLoadSuccess]);\r\n  const onPageLoadSuccess = useCallback((data: PDFPageProxy) => {\r\n    props.onPageLoadSuccess?.(data);\r\n  }, [props.onPageLoadSuccess]);\r\n\r\n  const onPageInViewport = useCallback((page: number, intersection: { isIntersecting: boolean, intersectionRatio: number }) => {\r\n    if (props.showAllPages) {\r\n      setPageByViewport(page, intersection);\r\n    } else {\r\n      setPage(page);\r\n    }\r\n  }, [maxPage, props.showAllPages]);\r\n  const onBboxClick = useCallback((data) => {\r\n      props.onBboxClick?.(data);\r\n    }, []);\r\n\r\n  const setPageByViewport = useMemo(() => (newPage: number, intersection: { isIntersecting: boolean, intersectionRatio: number }) => {\r\n    const { isIntersecting, intersectionRatio } = intersection;\r\n    if (isIntersecting) {\r\n      if (!pagesByViewport.includes(newPage)) {\r\n        pagesByViewport.push(newPage);\r\n        ratioArray.push(intersectionRatio);\r\n        setPagesByViewport(pagesByViewport);\r\n        setRatioArray(ratioArray);\r\n      } else {\r\n        ratioArray[pagesByViewport.indexOf(newPage)] = intersectionRatio;\r\n        setRatioArray(ratioArray);\r\n      }\r\n    } else {\r\n      if (pagesByViewport.includes(newPage)) {\r\n        const prevPageIndex = pagesByViewport.indexOf(newPage);\r\n        pagesByViewport.splice(prevPageIndex, 1);\r\n        setPagesByViewport(pagesByViewport);\r\n        ratioArray.splice(prevPageIndex, 1);\r\n        setRatioArray(ratioArray);\r\n      }\r\n    }\r\n\r\n    let newPageIndex = -1;\r\n    pagesByViewport.forEach((_pageFromViewport, index) => {\r\n      if (newPageIndex === -1) {\r\n        newPageIndex = index;\r\n      }\r\n\r\n      if (ratioArray[newPageIndex] < ratioArray[index]) {\r\n        newPageIndex = index;\r\n      }\r\n    });\r\n\r\n    if (newPageIndex !== -1 && pagesByViewport[newPageIndex]) {\r\n      setPage(pagesByViewport[newPageIndex]);\r\n      if (scrollIntoPage) {\r\n        setScrollIntoPage(0);\r\n      }\r\n    }\r\n  }, [pagesByViewport, page, ratioArray, scrollIntoPage]);\r\n  useDebounce(() => {\r\n    if (props.page !== page) props.onPageChange?.(page)\r\n  }, 30, [page]);\r\n\r\n  useEffect(() => {\r\n    if (page !== props.page) {\r\n      setPage(props.page || 1);\r\n      if (props.showAllPages) {\r\n        setScrollIntoPage(props.page);\r\n      }\r\n    }\r\n  }, [props.page, props.showAllPages]);\r\n\r\n  useEffect(() => {\r\n    setLoaded(false);\r\n    setPagesByViewport([]);\r\n    setRatioArray([]);\r\n    setDefaultHeight(0);\r\n    setDefaultWidth(0);\r\n    setMaxPage(0);\r\n    setPage(1);\r\n  }, [props.file]);\r\n\r\n  return (\r\n    <Document\r\n      className=\"pdf-document\"\r\n      file={props.file}\r\n      onLoadSuccess={onDocumentLoadSuccess}\r\n      onLoadError={props.onLoadError}\r\n      externalLinkTarget={props.externalLinkTarget}\r\n      error={props.error}\r\n      loading={props.loading}\r\n      noData={props.noData}\r\n      onItemClick={props.onItemClick}\r\n      rotate={props.rotate}\r\n    >\r\n      {useMemo(() => loaded ? shownPages.map((page) =>\r\n        <PdfPage\r\n          defaultHeight={defaultHeight}\r\n          defaultWidth={defaultWidth}\r\n          key={page}\r\n          page={page}\r\n          pageError={props.pageError}\r\n          inputRef={props.inputRef}\r\n          height={props.height}\r\n          width={props.width}\r\n          pageLoading={props.pageLoading}\r\n          renderAnnotationLayer={props.renderAnnotationLayer}\r\n          renderInteractiveForms={props.renderInteractiveForms}\r\n          renderTextLayer={props.renderTextLayer}\r\n          scale={props.scale}\r\n          onPageLoadError={props.onPageLoadError}\r\n          onPageLoadProgress={props.onPageLoadProgress}\r\n          onPageLoadSuccess={onPageLoadSuccess}\r\n          onPageRenderError={props.onPageRenderError}\r\n          onPageRenderSuccess={props.onPageRenderSuccess}\r\n          onGetAnnotationsSuccess={props.onGetAnnotationsSuccess}\r\n          onGetAnnotationsError={props.onGetAnnotationsError}\r\n          onGetTextSuccess={props.onGetTextSuccess}\r\n          onGetTextError={props.onGetTextError}\r\n          onPageInViewport={onPageInViewport}\r\n          bboxList={bboxMap[page]}\r\n          activeBboxIndex={props.activeBboxIndex}\r\n          onBboxClick={onBboxClick}\r\n        />\r\n      ) : null, [loaded, shownPages, defaultHeight, defaultWidth, bboxMap, props])}\r\n    </Document>\r\n  );\r\n}\r\n\r\nexport default memo(PdfDocument);\r\n","import {IBboxLocation} from '../index';\r\n\r\nexport const buildBboxMap = (bboxes: IBboxLocation[]) => {\r\n  const bboxMap = {};\r\n  bboxes.forEach((bbox, index) => {\r\n    if (bbox.page) {\r\n      if (typeof bbox.location !== 'string') {\r\n        bboxMap[bbox.page] = [\r\n          ...(bboxMap[bbox.page] || []),\r\n          {\r\n            index,\r\n            location: bbox.location,\r\n          },\r\n        ];\r\n      } else {\r\n        const bboxesFromLocation = calculateLocation(bbox.location as string);\r\n        bboxesFromLocation.map((bbox: IBboxLocation) => {\r\n          bboxMap[bbox.page] = [\r\n            ...(bboxMap[bbox.page] || []),\r\n            {\r\n              index,\r\n              location: bbox.location,\r\n            },\r\n          ];\r\n        })\r\n      }\r\n    }\r\n  });\r\n  return bboxMap;\r\n}\r\n\r\nconst calculateLocation = (location: string) => {\r\n  const bboxes = [];\r\n  const [pages, boundingBox] = location.split('/');\r\n  const [start, end] = pages.replace('pages[', '').replace(']', '').split('-');\r\n  const [x, y, x1, y1] = boundingBox.replace('boundingBox[', '').replace(']', '').split(',');\r\n  const width = parseFloat(x1) - parseFloat(x);\r\n\r\n  if (end) {\r\n    for (let i = parseInt(start) + 1; i <= parseInt(end) + 1; i++) {\r\n      switch (i) {\r\n        case parseInt(start) + 1:\r\n          bboxes.push({\r\n            page: i,\r\n            location: [parseFloat(x), parseFloat(y1), width, 'bottom'],\r\n          });\r\n          break;\r\n        case parseInt(end) + 1:\r\n          bboxes.push({\r\n            page: i,\r\n            location: [parseFloat(x), parseFloat(y), width, 'top'],\r\n          });\r\n          break;\r\n        default:\r\n          bboxes.push({\r\n            page: i,\r\n            location: [parseFloat(x), 0, width, 'top'],\r\n          });\r\n          break;\r\n      }\r\n    }\r\n  } else {\r\n    const height = parseFloat(y1) - parseFloat(y);\r\n    bboxes.push({\r\n      page: parseFloat(start),\r\n      location: [parseFloat(x), parseFloat(y), width, height],\r\n    })\r\n  }\r\n\r\n  return bboxes;\r\n}\r\n","import React, {FC, useMemo} from 'react';\r\n\r\nimport PdfDocument, { IPdfDocumentProps } from './components/pdfDocument/PdfDocument';\r\nimport ViewerProvider from './components/viewerContext/ViewerContext';\r\nimport {buildBboxMap} from './services/bboxService';\r\n\r\nimport './styles.scss'\r\n\r\nexport interface IBboxLocation {\r\n  page: number;\r\n  location: (number | string)[] | string;\r\n}\r\n\r\ninterface IPdfViewerProps extends IPdfDocumentProps {\r\n  bboxes?: IBboxLocation[];\r\n  className?: string\r\n}\r\n\r\nconst App: FC<IPdfViewerProps> = (props) => {\r\n  const { className = '', bboxes = [], ...pdfProps } = props;\r\n  const bboxMap = useMemo(() => buildBboxMap(bboxes), [bboxes]);\r\n  return (\r\n    <ViewerProvider>\r\n      <div className={`pdf-viewer ${className}`}>\r\n        <PdfDocument {...pdfProps} bboxMap={bboxMap}/>\r\n      </div>\r\n    </ViewerProvider>\r\n  );\r\n}\r\n\r\nexport default App\r\n"],"names":["styled","useMemo","React","memo","createContext","useState","useContext","useRef","useIntersection","useCallback","useEffect","Page","Bbox","pdfjs","useDebounce","Document","PdfPage","PdfDocument"],"mappings":"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"}