{"version":3,"file":"index.js","sources":["../src/components/bbox/Bbox.tsx","../src/components/viewerContext/ViewerContext.tsx","../src/services/bboxService.ts","../src/services/constants.ts","../src/components/pdfPage/PdfPage.tsx","../src/components/pdfDocument/PdfDocument.tsx","../src/index.tsx"],"sourcesContent":["import React, {FC, memo, useMemo} from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport './bbox.scss';\r\n\r\nconst bboxBg = 'rgba(255, 255, 255, 0)';\r\nconst bboxBorder = 'grey';\r\nconst bboxBorderHover = 'orangered';\r\nconst bboxRelatedBorder = 'rgba(255,176,0,0.5)';\r\nconst bboxBgSelected = 'rgba(255, 69, 0, 0.5)';\r\nconst bboxRelatedBackground = 'rgba(255,176,0,0.3)';\r\n\r\nexport interface IBbox {\r\n  location: (number | string)[];\r\n  index: number;\r\n  groupId?: string;\r\n  mcidList?: number[];\r\n  glyphIndex?: number;\r\n  operatorIndex?: number;\r\n  contentItemPath?: number[];\r\n}\r\n\r\nexport interface IColorScheme {\r\n  border?: string;\r\n  borderHovered?: string;\r\n  borderSelected?: string;\r\n  borderRelated?: string;\r\n  background?: string;\r\n  backgroundSelected?: string;\r\n  backgroundHovered?: string;\r\n  backgroundRelated?: string;\r\n}\r\n\r\ninterface IBboxProps {\r\n  bbox: IBbox;\r\n  related?: boolean;\r\n  scale: number;\r\n  selected?: boolean;\r\n  colorScheme?: IColorScheme;\r\n  onClick?(e: any): void;\r\n}\r\n\r\ninterface IBboxDivProps {\r\n  left: string;\r\n  bottom: string;\r\n  width: string;\r\n  height: string;\r\n  top?: string;\r\n  colorScheme?: IColorScheme;\r\n}\r\n\r\nconst BboxDiv = styled('div')`\r\n  left: ${(props: IBboxDivProps) => props.left};\r\n  bottom: ${(props: IBboxDivProps) => props.bottom};\r\n  height: ${(props: IBboxDivProps) => props.height};\r\n  width: ${(props: IBboxDivProps) => props.width};\r\n  top: ${(props: IBboxDivProps) => props.top};\r\n  border-color: ${(props: IBboxDivProps) => props.colorScheme && props.colorScheme.border || bboxBorder};\r\n  background-color: ${(props: IBboxDivProps) => props.colorScheme && props.colorScheme.background || bboxBg};\r\n  &:hover {\r\n    border-color: ${(props: IBboxDivProps) => props.colorScheme && props.colorScheme.borderHovered || bboxBorderHover};\r\n    background-color: ${(props: IBboxDivProps) => props.colorScheme && props.colorScheme.backgroundHovered || bboxBg};\r\n  }\r\n  &.pdf-bbox_selected {\r\n    border-color: ${(props: IBboxDivProps) => props.colorScheme && props.colorScheme.borderSelected || bboxBorderHover};\r\n    background-color: ${(props: IBboxDivProps) => props.colorScheme && props.colorScheme.backgroundSelected || bboxBgSelected};\r\n  }\r\n  &.pdf-bbox_related {\r\n    border-color: ${(props: IBboxDivProps) => props.colorScheme && props.colorScheme.borderRelated || bboxRelatedBorder};\r\n    background-color: ${(props: IBboxDivProps) => props.colorScheme && props.colorScheme.backgroundRelated || bboxRelatedBackground};\r\n  }\r\n`;\r\n\r\nconst Bbox: FC<IBboxProps> = (props) => {\r\n  const [left, bottom, width, height, top] = useMemo(() => {\r\n    return [\r\n      (parseFloat(props.bbox.location[0] as string) * props.scale) + 'px',\r\n      (props.bbox.location[3] === 'bottom'\r\n        ? '0'\r\n        : (parseFloat(props.bbox.location[1] as string) * props.scale) + 'px'),\r\n      (parseFloat(props.bbox.location[2] as string) * props.scale) + 'px',\r\n      (props.bbox.location[3] === 'top'\r\n        ? 'auto'\r\n        : (parseFloat(props.bbox.location[3] as string) * props.scale) + 'px'),\r\n      props.bbox.location[3] === 'top'\r\n        ? '0' : props.bbox.location[3] === 'bottom'\r\n        ? `calc(100% - ${parseFloat(props.bbox.location[1] as string) * props.scale}px)`\r\n        : 'auto',\r\n    ]\r\n  } ,[props.bbox.location, props.scale]);\r\n\r\n  return <BboxDiv className={`pdf-bbox ${props.selected && 'pdf-bbox_selected'} ${props.related && 'pdf-bbox_related'}`}\r\n                  left={left}\r\n                  bottom={bottom}\r\n                  width={width}\r\n                  height={height}\r\n                  top={top}\r\n                  colorScheme={props.colorScheme || {}}\r\n                  onClick={props.onClick}\r\n  />;\r\n};\r\n\r\nexport default memo(Bbox);\r\n","import React, {FC, createContext, useState, ReactNode } from 'react';\r\n\r\nexport const ViewerContext = createContext({} as {\r\n  page: number,\r\n  setPage(page: number): void,\r\n  maxPage: number,\r\n  setMaxPage(page: number): void,\r\n  scrollIntoPage: number,\r\n  setScrollIntoPage(page: number): void,\r\n});\r\n\r\nconst ViewerProvider: FC<{children: ReactNode}> = (props) => {\r\n  const [page, setPage] = useState(1);\r\n  const [scrollIntoPage, setScrollIntoPage] = useState<number>(0);\r\n  const [maxPage, setMaxPage] = useState(0);\r\n\r\n  const context = {\r\n    page,\r\n    setPage,\r\n    maxPage,\r\n    setMaxPage,\r\n    scrollIntoPage,\r\n    setScrollIntoPage,\r\n  };\r\n\r\n  return <ViewerContext.Provider value={context}>{props.children}</ViewerContext.Provider>;\r\n};\r\n\r\nexport default ViewerProvider;\r\n","import _ from 'lodash';\r\n\r\nimport {IBboxLocation} from '../index';\r\nimport {AnyObject} from '../types/generics';\r\nimport {IBbox} from \"../components/bbox/Bbox\";\r\n\r\nexport const buildBboxMap = (bboxes: IBboxLocation[], structure: AnyObject) => {\r\n  const bboxMap = {};\r\n  bboxes.forEach((bbox, index) => {\r\n    try {\r\n      if (bbox.location.includes('contentStream') && bbox.location.includes('operators')) {\r\n        const bboxPosition = calculateLocationInStreamOperator(bbox.location);\r\n        if (!bboxPosition) {\r\n            return;\r\n        }\r\n        bboxMap[bboxPosition.pageIndex + 1] = [\r\n          ...(bboxMap[bboxPosition.pageIndex + 1] || []),\r\n          {\r\n            index,\r\n            operatorIndex: bboxPosition.operatorIndex,\r\n            glyphIndex: bboxPosition.glyphIndex,\r\n          }\r\n        ];\r\n      } else if (bbox.location.includes('StructTreeRoot') || bbox.location.includes('root/doc') || bbox.location === 'root') {\r\n        const mcidData = getTagsFromErrorPlace(bbox.location, structure);\r\n        mcidData.forEach(([mcidList, pageIndex, contentItemPath]) => {\r\n          bboxMap[pageIndex + 1] = [\r\n            ...(bboxMap[pageIndex + 1] || []),\r\n            {\r\n              index,\r\n              mcidList,\r\n              contentItemPath,\r\n              groupId: bbox.groupId || undefined,\r\n            },\r\n          ];\r\n        });\r\n      } else {\r\n        const bboxesFromLocation = bbox.location.includes('pages[') ? calculateLocation(bbox.location as string) : calculateLocationJSON(bbox.location as string);\r\n        bboxesFromLocation.forEach((bboxWithLocation: IBboxLocation) => {\r\n          bboxMap[bboxWithLocation.page] = [\r\n            ...(bboxMap[bboxWithLocation.page] || []),\r\n            {\r\n              index,\r\n              location: bboxWithLocation.location,\r\n              groupId: bbox.groupId || undefined,\r\n            },\r\n          ];\r\n        })\r\n      }\r\n    } catch (e) {\r\n      console.error(`Location not supported: ${bbox.location}`);\r\n    }\r\n  });\r\n  return bboxMap;\r\n}\r\n\r\nexport const calculateLocationInStreamOperator = (location: string) => {\r\n  const path = location.split(\"/\");\r\n  let pageIndex = -1;\r\n  let operatorIndex = -1;\r\n  let glyphIndex = -1;\r\n  path.forEach((step) => {\r\n    if (step.startsWith('pages')) {\r\n      pageIndex = parseInt(step.split(/[\\[\\]]/)[1]);\r\n    }\r\n    if (step.startsWith('operators')) {\r\n      operatorIndex = parseInt(step.split(/[\\[\\]]/)[1]);\r\n    }\r\n    if (step.startsWith('usedGlyphs')) {\r\n      glyphIndex = parseInt(step.split(/[\\[\\]]/)[1]);\r\n    }\r\n  });\r\n  if (pageIndex === -1 || operatorIndex === -1 || glyphIndex === -1) {\r\n      return null;\r\n  }\r\n  return {\r\n    pageIndex,\r\n    operatorIndex,\r\n    glyphIndex\r\n  }\r\n}\r\n\r\nexport const getSelectedPageByLocation = (bboxLocation: string) => {\r\n  const location = bboxLocation;\r\n  const path = location.split('/')\r\n  let pageNumber = -1;\r\n  if (location?.includes('pages') && path[path.length - 1].startsWith('pages')) {\r\n    location.split('/').forEach(nodeString => {\r\n      if (nodeString.includes('pages')) {\r\n        pageNumber = parseInt(nodeString.split(/[[\\]]/)[1], 10) + 1;\r\n      }\r\n    });\r\n  }\r\n  return pageNumber;\r\n}\r\n\r\nexport const getBboxPages = (bboxes: IBboxLocation[], structure: AnyObject) => {\r\n  return bboxes.map((bbox) => {\r\n    try {\r\n      if (bbox.location.includes('StructTreeRoot') || bbox.location.includes('root/doc') || bbox.location === 'root') {\r\n        const mcidData = getTagsFromErrorPlace(bbox.location, structure);\r\n        const pageIndex = mcidData[0][1];\r\n        return pageIndex + 1;\r\n      } else {\r\n        const bboxesFromLocation = bbox.location.includes('pages[') ? calculateLocation(bbox.location as string) : calculateLocationJSON(bbox.location as string);\r\n        return bboxesFromLocation.length ? bboxesFromLocation[0].page : 0;\r\n      }\r\n    } catch (e) {\r\n      console.error(`Location not supported: ${bbox.location}`);\r\n    }\r\n  });\r\n}\r\n\r\nexport const checkIsBboxOutOfThePage = (bbox: IBbox, scale: number, page: number) => {\r\n  const parent = (document.querySelector('.react-pdf__Page[data-page-number=\"' + page + '\"]') as any);\r\n  const parentHeight = parent.offsetHeight;\r\n  const parentWidth = parent.offsetWidth;\r\n\r\n  const left = parseFloat(bbox.location[0] as string) * scale;\r\n  const top = parseFloat(bbox.location[1] as string) * scale;\r\n  const width = parseFloat(bbox.location[2] as string) * scale;\r\n  const height = parseFloat(bbox.location[3] as string) * scale;\r\n\r\n  return (\r\n      top <= 0 && (top + height) <= 1 ||\r\n      left <= 0 && (left + width) <= 1 ||\r\n      parentHeight - top <= 1 && (top + height) >= parentHeight ||\r\n      parentWidth - left <= 1 && (left + width) >= parentWidth\r\n  );\r\n}\r\n\r\nconst calculateLocation = (location: string) => {\r\n  const bboxes = [];\r\n  const [pages, boundingBox] = location.split('/');\r\n  const [start, end] = pages.replace('pages[', '').replace(']', '').split('-');\r\n  const [x, y, x1, y1] = boundingBox.replace('boundingBox[', '').replace(']', '').split(',');\r\n  const width = parseFloat(x1) - parseFloat(x);\r\n\r\n  if (end) {\r\n    for (let i = parseInt(start) + 1; i <= parseInt(end) + 1; i++) {\r\n      switch (i) {\r\n        case parseInt(start) + 1:\r\n          bboxes.push({\r\n            page: i,\r\n            location: [parseFloat(x), parseFloat(y1), width, 'bottom'],\r\n          });\r\n          break;\r\n        case parseInt(end) + 1:\r\n          bboxes.push({\r\n            page: i,\r\n            location: [parseFloat(x), parseFloat(y), width, 'top'],\r\n          });\r\n          break;\r\n        default:\r\n          bboxes.push({\r\n            page: i,\r\n            location: [parseFloat(x), 0, width, 'top'],\r\n          });\r\n          break;\r\n      }\r\n    }\r\n  } else {\r\n    const height = parseFloat(y1) - parseFloat(y);\r\n    bboxes.push({\r\n      page: parseInt(start) + 1,\r\n      location: [parseFloat(x), parseFloat(y), width, height],\r\n    })\r\n  }\r\n\r\n  return bboxes;\r\n}\r\n\r\nconst calculateLocationJSON = (location: string) => {\r\n  const bboxes: AnyObject[] = [];\r\n  const bboxMap = JSON.parse(location);\r\n\r\n  bboxMap.bbox.forEach(({ p, rect }: {p: string, rect: string[]}) => {\r\n    const [x, y, x1, y1] = rect;\r\n    const width = parseFloat(x1) - parseFloat(x);\r\n    const height = parseFloat(y1) - parseFloat(y);\r\n    bboxes.push({\r\n      page: parseFloat(p) + 1,\r\n      location: [parseFloat(x), parseFloat(y), width, height],\r\n    });\r\n  });\r\n  return bboxes;\r\n}\r\n\r\nconst getTagsFromErrorPlace = (context: string, structure: AnyObject) => {\r\n  const defaultValue = [[[], -1, undefined]];\r\n  let selectedTag = convertContextToPath(context);\r\n\r\n  if (_.isEmpty(selectedTag)) {\r\n    return defaultValue;\r\n  }\r\n\r\n  if (selectedTag.hasOwnProperty('mcid') && selectedTag.hasOwnProperty('pageIndex')) {\r\n    return [[[selectedTag.mcid], selectedTag.pageIndex]];\r\n  } else if (selectedTag.hasOwnProperty('annot') && selectedTag.hasOwnProperty('pageIndex')) {\r\n    return [[{ annot: selectedTag.annot }, selectedTag.pageIndex]];\r\n  } else if (selectedTag.hasOwnProperty('contentItems')) {\r\n    return [[undefined, selectedTag.pageIndex, [\r\n      selectedTag.contentStream,\r\n      selectedTag.content,\r\n      ...selectedTag.contentItems\r\n    ]]];\r\n  } else if (selectedTag instanceof Array) {\r\n    let objectOfErrors = { ...structure };\r\n    selectedTag.forEach((node, index) => {\r\n      let nextStepObject;\r\n      if (!objectOfErrors.children) {\r\n        nextStepObject = objectOfErrors[node[0]];\r\n      } else if (!(objectOfErrors.children instanceof Array)) {\r\n        if (objectOfErrors.children.name === node[1]) {\r\n          nextStepObject = objectOfErrors.children;\r\n        } else {\r\n          nextStepObject = objectOfErrors;\r\n        }\r\n      } else {\r\n        if (objectOfErrors?.name === node[1] && index === 0) {\r\n          nextStepObject = objectOfErrors;\r\n        } else {\r\n          const clearedChildrenArray = [...objectOfErrors.children].filter((tag: AnyObject) =>  !tag?.mcid);\r\n          nextStepObject = { ...(clearedChildrenArray.length ? clearedChildrenArray : objectOfErrors.children)[node[0]] };\r\n        }\r\n      }\r\n\r\n      objectOfErrors = { ...nextStepObject };\r\n    });\r\n    return findAllMcid(objectOfErrors);\r\n  }\r\n  return defaultValue;\r\n}\r\n\r\n/*\r\n *  Convert returning from veraPDF api path to error in array of nodes\r\n *\r\n *  @param errorContext {string} ugly path to error\r\n *\r\n *  @return arrayOfNodes {array} of nodes from Document to error Tag\r\n */\r\nconst convertContextToPath = (errorContext = '') => {\r\n  let arrayOfNodes: AnyObject[] = [];\r\n  if (!errorContext) {\r\n    return arrayOfNodes;\r\n  }\r\n\r\n  let contextString: string | string[] = errorContext;\r\n\r\n  try {\r\n    if (contextString.includes('contentItem') && !contextString.includes('mcid')) {\r\n      const result: any = contextString.match(\r\n        /pages\\[(?<pages>\\d+)\\](\\(.+\\))?\\/contentStream\\[(?<contentStream>\\d+)\\](\\(.+\\))?\\/content\\[(?<content>\\d+)\\](?<contentItems>((\\(.+\\))?\\/contentItem\\[(\\d+)\\])+)/\r\n      );\r\n      if (result) {\r\n        try {\r\n          let path: AnyObject = {};\r\n          path.pageIndex = parseInt(result.groups.pages, 10);\r\n          path.contentStream = parseInt(result.groups.contentStream, 10);\r\n          path.content = parseInt(result.groups.content, 10);\r\n          path.contentItems = result.groups.contentItems.split('/').filter((ci: any) => ci.includes('contentItem')).map((ci: any) => {\r\n            const contentItemIndex = ci.match(/\\[(?<contentItem>\\d+)\\]/);\r\n            return parseInt(contentItemIndex?.groups?.contentItem || '-1', 10);\r\n          });\r\n          return path;\r\n        } catch (err) {\r\n          console.log('NoMCIDContentItemPathParseError:', err.message || err);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (contextString.includes('contentItem')) {\r\n      let path: AnyObject = {};\r\n      contextString.split('/').forEach(nodeString => {\r\n        if (nodeString.includes('page')) {\r\n          path.pageIndex = parseInt(nodeString.split(/[[\\]]/)[1], 10);\r\n        } else if (nodeString.includes('contentItem') && nodeString.includes('mcid')) {\r\n          path.mcid = parseInt(nodeString.split('mcid:')[1].slice(0, -1), 10);\r\n        }\r\n      });\r\n      return path;\r\n    } else if (contextString.includes('annots')) {\r\n      let path: AnyObject = {};\r\n      contextString.split('/').forEach(nodeString => {\r\n        if (nodeString.includes('page')) {\r\n          path.pageIndex = parseInt(nodeString.split(/[[\\]]/)[1], 10);\r\n        } else if (nodeString.includes('annots')) {\r\n          path.annot = parseInt(nodeString.split(/[[\\]]/)[1], 10);\r\n        }\r\n      });\r\n      return path;\r\n    }\r\n\r\n    contextString = contextString.split('PDStructTreeRoot)/')[1].split('/'); // cut path before start of Document\r\n\r\n    contextString.forEach(nodeString => {\r\n      const nextIndex = parseInt(nodeString.split('](')[0].split('K[')[1], 10);\r\n      let nextTag: string | string[] = nodeString\r\n        .split('(')[1]\r\n        .split(')')[0]\r\n        .split(' ');\r\n      nextTag = nextTag[nextTag.length - 1];\r\n\r\n      arrayOfNodes = [...arrayOfNodes, [nextIndex, nextTag]];\r\n    });\r\n\r\n    return arrayOfNodes;\r\n  } catch (e) {\r\n    return [];\r\n  }\r\n}\r\n\r\n/*\r\n *  Going through object of tags from error placement and return array of its MCIDs\r\n *\r\n *  @param {Object} of tags\r\n *\r\n *  @return [[{Array}, {Number}]] - [[[array of mcids], page of error]]\r\n */\r\nfunction findAllMcid(tagObject: AnyObject) {\r\n  const mcidMap: any = {};\r\n\r\n  function func(obj: AnyObject) {\r\n    if (!obj) return;\r\n    if (obj.mcid || obj.mcid === 0) {\r\n      if (!mcidMap[obj.pageIndex]) mcidMap[obj.pageIndex] = [];\r\n      mcidMap[obj.pageIndex].push(obj.mcid);\r\n    }\r\n    if (!obj.children) {\r\n      return;\r\n    }\r\n\r\n    if (!(obj.children instanceof Array)) {\r\n      func(obj.children);\r\n    } else {\r\n      [...obj.children].forEach(child => func(child));\r\n    }\r\n  }\r\n\r\n  func(tagObject);\r\n\r\n  return _.map(mcidMap, (value, key) => [value, _.toNumber(key)]);\r\n}\r\n\r\nexport const getBboxForGlyph = (operatorIndex: number, glyphIndex: number, operationsList: number[][][], viewport: number[], rotateAngle: number) => {\r\n  const bbox = operationsList[operatorIndex] ? operationsList[operatorIndex][glyphIndex] : null;\r\n  if (!bbox) {\r\n    return [];\r\n  }\r\n  const coordsArray = rotateCoordinates(bbox, rotateAngle, viewport);\r\n  const rotatedViewport = rotateViewport(rotateAngle, viewport);\r\n  return [coordsArray[0] - rotatedViewport[0], coordsArray[1] - rotatedViewport[1], coordsArray[2], coordsArray[3]];\r\n}\r\n\r\nexport const parseMcidToBbox = (listOfMcid: number[] | AnyObject, pageMap: AnyObject, annotations: AnyObject, viewport: number[], rotateAngle: number) => {\r\n  let coords: AnyObject = {};\r\n\r\n  if (listOfMcid instanceof Array) {\r\n    listOfMcid.forEach(mcid => {\r\n      const currentBbox = pageMap[mcid];\r\n      if (\r\n        !_.isNil(currentBbox) &&\r\n        !_.isNaN(currentBbox.x) &&\r\n        !_.isNaN(currentBbox.y) &&\r\n        !_.isNaN(currentBbox.width) &&\r\n        !_.isNaN(currentBbox.height)\r\n      ) {\r\n        coords = concatBoundingBoxes(currentBbox, coords.x ? coords : undefined);\r\n      }\r\n    });\r\n  } else if (listOfMcid.hasOwnProperty('annot')) {\r\n    const rect = annotations[listOfMcid.annot]?.rect;\r\n    if (rect) {\r\n      coords = {\r\n        x: rect[0],\r\n        y: rect[1],\r\n        width: Math.abs(rect[0] - rect[2]),\r\n        height: Math.abs(rect[1] - rect[3]),\r\n      };\r\n    }\r\n  }\r\n  if (!coords) return [];\r\n  const coordsArray = rotateCoordinates([coords.x, coords.y, coords.width, coords.height], rotateAngle, viewport);\r\n  const rotatedViewport = rotateViewport(rotateAngle, viewport);\r\n  return [coordsArray[0] - rotatedViewport[0], coordsArray[1] - rotatedViewport[1], coordsArray[2], coordsArray[3]];\r\n}\r\n\r\nexport const rotateViewport = (rotateAngle: number, viewport: number[]): number[] => {\r\n  if ([0, 180].includes(rotateAngle)) {\r\n    return viewport;\r\n  }\r\n  return [viewport[1], viewport[0], viewport[3], viewport[2]];\r\n}\r\n\r\nexport const rotateCoordinates = (coords: number[], rotateAngle: number, viewport: number[]): number[] => {\r\n  if (rotateAngle === 0) return coords;\r\n  const [x1, y1] = rotatePoint(rotateAngle, [coords[0], coords[1]], viewport);\r\n  const [x2, y2] = rotatePoint(rotateAngle, [coords[0] + coords[2], coords[1] + coords[3]], viewport);\r\n  return [Math.min(x1, x2), Math.min(y1, y2), Math.abs(x1 - x2), Math.abs(y1 - y2)];\r\n}\r\n\r\nexport const rotatePoint = (rotateAngle: number, point: number[], viewport: number[]): number[] => {\r\n  const rad = (rotateAngle * Math.PI) / 180;\r\n  let x = point[0] * Math.cos(rad) + point[1] * Math.sin(rad);\r\n  let y = -point[0] * Math.sin(rad) + point[1] * Math.cos(rad);\r\n  switch (rotateAngle) {\r\n    case 90:\r\n      y += viewport[2] + viewport[0];\r\n      break;\r\n    case 180:\r\n      x += viewport[2] + viewport[0];\r\n      y += viewport[3] + viewport[1];\r\n      break;\r\n    case 270:\r\n      x += viewport[3] + viewport[1];\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n  return [x, y];\r\n}\r\n\r\nexport const activeBboxInViewport = (): boolean => {\r\n  let isInView = false;\r\n  const bboxes = document.querySelectorAll('.pdf-bbox_selected');\r\n  for (let index = 0; index < bboxes.length; index++) {\r\n    isInView = elementInViewport(bboxes[index]);\r\n    if (isInView) {\r\n      break;\r\n    }\r\n  }\r\n\r\n  return isInView;\r\n}\r\n\r\nexport const scrollToActiveBbox = (): void => {\r\n  if (activeBboxInViewport()) {\r\n    return;\r\n  }\r\n  const el: any = document.querySelector('.pdf-bbox_selected');\r\n  if (!el) return;\r\n  el.scrollIntoView();\r\n  (document.querySelector('.pdf-viewer') as any).scrollTop -= 150;\r\n  if (!activeBboxInViewport()) {\r\n    el.scrollIntoView();\r\n  }\r\n}\r\n\r\nfunction elementInViewport (el: any): boolean {\r\n  let top = el.offsetTop;\r\n  let left = el.offsetLeft;\r\n  let width = el.offsetWidth;\r\n  let height = el.offsetHeight;\r\n  while(el.offsetParent && !el.offsetParent.className.includes('pdf-viewer')) {\r\n    el = el.offsetParent;\r\n    top += el.offsetTop;\r\n    left += el.offsetLeft;\r\n  }\r\n  const parent = (document.querySelector('.pdf-viewer') as any);\r\n  const parentScrollTop = parent.scrollTop as unknown as number;\r\n  const parentScrollLeft = parent.scrollLeft as unknown as number;\r\n  return (\r\n    top >= parentScrollTop &&\r\n    left >= parentScrollLeft &&\r\n    (top + height) <= (parentScrollTop + parent.offsetHeight) &&\r\n    (left + width) <= (parentScrollLeft + parent.offsetWidth)\r\n  );\r\n}\r\n\r\nfunction concatBoundingBoxes(newBoundingBox: AnyObject, oldBoundingBox?: AnyObject): AnyObject {\r\n  if (_.isNil(oldBoundingBox) && _.isNil(newBoundingBox)) {\r\n    return {};\r\n  }\r\n\r\n  if (_.isNil(newBoundingBox)) {\r\n    return oldBoundingBox || {};\r\n  }\r\n  if (_.isNil(oldBoundingBox)) {\r\n    return _.cloneDeep(newBoundingBox);\r\n  }\r\n  return {\r\n    x: Math.min(newBoundingBox.x, oldBoundingBox.x),\r\n    y: Math.min(newBoundingBox.y, oldBoundingBox.y),\r\n    width:\r\n      Math.max(newBoundingBox.x + newBoundingBox.width, oldBoundingBox.x + oldBoundingBox.width) -\r\n      Math.min(newBoundingBox.x, oldBoundingBox.x),\r\n    height:\r\n      Math.max(newBoundingBox.y + newBoundingBox.height, oldBoundingBox.y + oldBoundingBox.height) -\r\n      Math.min(newBoundingBox.y, oldBoundingBox.y),\r\n  };\r\n}\r\n","export const WARNING_CODES = {\r\n    BBOX_OUT_OF_THE_PAGE_VIEWPORT: 'BBOX_OUT_OF_THE_PAGE_VIEWPORT',\r\n};\r\n","import React, {FC, useCallback, useState, useRef, memo, useEffect, useContext, useMemo} from 'react';\r\nimport { Page, PDFPageProxy } from 'react-pdf';\r\nimport { useIntersection } from 'use-intersection';\r\nimport styled from 'styled-components';\r\nimport _ from 'lodash';\r\n\r\nimport Bbox, {IBbox, IColorScheme} from '../bbox/Bbox';\r\nimport { IPageProps } from './IPageProps';\r\nimport { ViewerContext } from '../viewerContext/ViewerContext';\r\nimport { AnyObject } from '../../types/generics';\r\nimport { getBboxForGlyph, parseMcidToBbox, checkIsBboxOutOfThePage } from '../../services/bboxService';\r\nimport { WARNING_CODES } from \"../../services/constants\";\r\n\r\nimport './pdfPage.scss';\r\n\r\ninterface IPdfPageProps extends IPageProps {\r\n  bboxList?: IBbox[];\r\n  defaultHeight?: number;\r\n  defaultWidth?: number;\r\n  structure?: AnyObject;\r\n  colorScheme?: IColorScheme;\r\n  groupId?: string;\r\n  onPageInViewport?(page: number, data: { isIntersecting?: boolean, intersectionRatio?: number }): void;\r\n  isPageSelected?: boolean;\r\n  onWarning?(warningCode: string): void;\r\n}\r\n\r\ninterface IStyledPdfPageProps {\r\n  height?: number;\r\n  width?: number;\r\n  scale: number;\r\n  colorScheme?: IColorScheme;\r\n}\r\n\r\nconst bboxBorderHover = 'orangered';\r\n\r\nconst StyledPdfPage = styled('div')`\r\n  min-height: ${(props: IStyledPdfPageProps) => props.height ? props.height*props.scale + 'px' : 'auto'};\r\n  min-width: ${(props: IStyledPdfPageProps) => props.width ? props.width*props.scale + 'px' : 'auto'};\r\n  &.pdf-page_selected {\r\n    outline-color: ${(props: IStyledPdfPageProps) => props.colorScheme && props.colorScheme.borderSelected || bboxBorderHover};\r\n  }\r\n`;\r\n\r\nconst PdfPage: FC<IPdfPageProps> = (props) => {\r\n  const { scrollIntoPage } = useContext(ViewerContext);\r\n  const { bboxList = [], scale = 1 } = props;\r\n  const intersectionRef = useRef(null);\r\n  const [bboxes, setBboxes] = useState<IBbox[]>([]);\r\n  const [loaded, setLoaded] = useState(false);\r\n  const [pageScale, setPageScale] = useState(scale);\r\n  const [pageViewport, setPageViewport] = useState<number[]>([]);\r\n  const [isRendered, setIsRendered] = useState(false);\r\n  const [isIntersecting, setIsIntersecting] = useState(false);\r\n  const [intersectionRatio, setIntersectionRatio] = useState(0);\r\n  useIntersection(intersectionRef, {\r\n    threshold: [.2, .4, .5, .6, .8, 1],\r\n  }, (entry) => {\r\n    if (isIntersecting !== entry.isIntersecting) {\r\n      setIsIntersecting(entry.isIntersecting);\r\n    }\r\n    if (intersectionRatio !== entry.intersectionRatio) {\r\n      setIntersectionRatio(entry.intersectionRatio);\r\n    }\r\n  });\r\n\r\n  const onPageClick = useCallback(() => {\r\n    props.onBboxClick?.(null);\r\n  }, []);\r\n  const onBboxClick = useCallback((index: any) => (e: Event) => {\r\n    e.stopPropagation();\r\n    props.onBboxClick?.({ index });\r\n  }, [props.onBboxClick]);\r\n  const onPageRenderSuccess = useCallback(() => {\r\n    setIsRendered(true);\r\n    props.onPageRenderSuccess?.();\r\n    document.querySelectorAll('.pdf-page_rendered img')?.forEach((img: any) => {\r\n      if (img.alt.includes('Annotation')) {\r\n        const index = img.src.lastIndexOf('/') + 1;\r\n        const name = img.src.substr(index);\r\n        img.src = require(`pdfjs-dist/web/images/${name}`) || img.src;\r\n      }\r\n    });\r\n  }, []);\r\n  const onPageLoadSuccess = useCallback((page: PDFPageProxy) => {\r\n    setIsRendered(true);\r\n    setPageViewport(page.view);\r\n    Promise.all([page.getOperatorList(), page.getAnnotations()]).then(([operatorList, annotations]) => {\r\n      const operationData = operatorList.argsArray[operatorList.argsArray.length - 2];\r\n      const [positionData, noMCIDData] = operatorList.argsArray[operatorList.argsArray.length - 1];\r\n      const bboxes = bboxList.map((bbox) => {\r\n        if (bbox.mcidList) {\r\n          bbox.location = parseMcidToBbox(bbox.mcidList, positionData, annotations, page.view, page.rotate);\r\n        } else if (bbox.contentItemPath) {\r\n          const contentItemsPath = bbox.contentItemPath.slice(2);\r\n          let contentItemsBBoxes = noMCIDData[bbox.contentItemPath[1]];\r\n          try {\r\n            contentItemsPath.forEach((ci, i) => {\r\n              if (contentItemsPath.length > i + 1 || !contentItemsBBoxes.final) {\r\n                contentItemsBBoxes = contentItemsBBoxes.contentItems[0];\r\n              }\r\n              contentItemsBBoxes = contentItemsBBoxes.contentItems[ci];\r\n            });\r\n\r\n            bbox.location = [\r\n              contentItemsBBoxes.contentItem.x,\r\n              contentItemsBBoxes.contentItem.y,\r\n              contentItemsBBoxes.contentItem.w,\r\n              contentItemsBBoxes.contentItem.h\r\n            ];\r\n          } catch (err) {\r\n            console.log('NoMCIDDataParseError:', err.message || err);\r\n            bbox.location = [0, 0, 0, 0];\r\n          }\r\n        }\r\n        if (_.isNumber(bbox.operatorIndex) && _.isNumber(bbox.glyphIndex)) {\r\n          bbox.location = getBboxForGlyph(bbox.operatorIndex, bbox.glyphIndex, operationData, page.view, page.rotate);\r\n        }\r\n\r\n        return bbox;\r\n      });\r\n      setBboxes(bboxes);\r\n    });\r\n    props.onPageLoadSuccess?.(page);\r\n  }, [bboxList, props.width, props.height, scale]);\r\n\r\n  useEffect(() => {\r\n    if (!loaded && isIntersecting) {\r\n      setLoaded(true);\r\n    }\r\n    props.onPageInViewport?.(props.page, { isIntersecting, intersectionRatio });\r\n  }, [isIntersecting, intersectionRatio, loaded])\r\n  useEffect(() => {\r\n    if (scrollIntoPage === props.page) {\r\n      (intersectionRef.current as unknown as HTMLElement)?.scrollIntoView();\r\n    }\r\n  }, [scrollIntoPage]);\r\n  useEffect(() => {\r\n    const width = pageViewport[2] - pageViewport[0];\r\n    const height = pageViewport[3] - pageViewport[1];\r\n    if (props.width && width) {\r\n      return setPageScale((props.width / width) * scale);\r\n    } else if (props.height && height) {\r\n      return setPageScale((props.height / height) * scale);\r\n    }\r\n\r\n    setPageScale(scale);\r\n  }, [pageViewport, scale, props.width, props.height]);\r\n  const isBboxSelected = useCallback((bbox: IBbox) => props.activeBboxIndex === bbox.index, [props.activeBboxIndex]);\r\n  const isRelated = useCallback((bbox: IBbox) => {\r\n    const [, , activeId] = props?.groupId?.split('-') || [];\r\n    const [, , bboxId] = bbox?.groupId?.split('-') || [];\r\n    return props.groupId ? activeId === bboxId && !isBboxSelected(bbox) : false;\r\n  }, [props.groupId, isBboxSelected]);\r\n\r\n  const activeBboxes = useMemo(() => bboxes.filter((bbox) => bbox.index === props.activeBboxIndex), [bboxes, props.activeBboxIndex]);\r\n\r\n  useEffect(\r\n    useCallback(() => {\r\n      if (activeBboxes && activeBboxes.length && activeBboxes.every((activeBbox) => checkIsBboxOutOfThePage(activeBbox, scale, props.page))) {\r\n        props.onWarning?.(WARNING_CODES.BBOX_OUT_OF_THE_PAGE_VIEWPORT);\r\n      }\r\n    }, [activeBboxes, scale, props.page]),\r\n  [activeBboxes]);\r\n\r\n  return (\r\n    <StyledPdfPage\r\n      className={`pdf-page pdf-page_rendered ${props.isPageSelected  && 'pdf-page_selected'}`}\r\n      data-page={props.page}\r\n      onClick={onPageClick}\r\n      height={!isRendered ? props.height || props.defaultHeight : undefined}\r\n      width={!isRendered ? props.width || props.defaultWidth : undefined}\r\n      scale={pageScale}\r\n      ref={intersectionRef}\r\n      colorScheme={props.colorScheme || {}}\r\n    >\r\n      {loaded ? <>\r\n        <Page\r\n          pageNumber={props.page}\r\n          error={props.pageError}\r\n          height={props.height}\r\n          width={props.width}\r\n          loading={props.pageLoading}\r\n          inputRef={props.inputRef}\r\n          renderAnnotationLayer={props.renderAnnotationLayer}\r\n          renderInteractiveForms={props.renderInteractiveForms}\r\n          renderTextLayer={props.renderTextLayer}\r\n          scale={props.scale}\r\n          onLoadError={props.onPageLoadError}\r\n          onLoadSuccess={onPageLoadSuccess}\r\n          onRenderError={props.onPageRenderError}\r\n          onRenderSuccess={onPageRenderSuccess}\r\n          onGetAnnotationsSuccess={props.onGetAnnotationsSuccess}\r\n          onGetAnnotationsError={props.onGetAnnotationsError}\r\n          onGetTextSuccess={props.onGetTextSuccess}\r\n          onGetTextError={props.onGetTextError}\r\n        />\r\n        {isRendered ? bboxes.map((bbox: IBbox, index) => (\r\n          <Bbox key={index} bbox={bbox} onClick={onBboxClick(bbox.index)} selected={isBboxSelected(bbox)} related={isRelated(bbox)} scale={pageScale} colorScheme={props.colorScheme} />\r\n        )) : null}\r\n      </> : null}\r\n    </StyledPdfPage>\r\n  );\r\n}\r\n\r\nexport default memo(PdfPage);\r\n","import React, {FC, memo, useCallback, useMemo, useState, useContext, useEffect} from 'react';\r\nimport { Document } from 'react-pdf';\r\nimport 'react-pdf/dist/esm/Page/AnnotationLayer.css';\r\nimport { PDFDocumentProxy } from 'pdfjs-dist/types/src/display/api';\r\nimport { useDebounce } from 'react-use';\r\nimport _ from 'lodash';\r\n\r\nimport { IDocumentProps } from './IDocumentProps';\r\nimport { IPageProps } from '../pdfPage/IPageProps';\r\nimport PdfPage from '../pdfPage/PdfPage';\r\nimport { PDFPageProxy } from 'react-pdf/dist/Page';\r\nimport { ViewerContext } from '../viewerContext/ViewerContext';\r\nimport {AnyObject, OrNull} from '../../types/generics';\r\nimport { TSelectedBboxData } from '../../types/selectedBboxData';\r\nimport { IBboxLocation } from '../../index';\r\nimport {\r\n  activeBboxInViewport,\r\n  buildBboxMap,\r\n  getSelectedPageByLocation,\r\n  getBboxPages,\r\n  scrollToActiveBbox\r\n} from '../../services/bboxService';\r\nimport { IColorScheme } from '../bbox/Bbox';\r\n// @ts-ignore\r\nimport pdfjsWorker from 'pdfjs-dist/build/pdf.worker.entry';\r\n\r\nimport './pdfDocument.scss';\r\n\r\ninterface IDocumentData extends PDFDocumentProxy {\r\n  _pdfInfo: {\r\n    structureTree: AnyObject;\r\n  }\r\n}\r\n\r\nexport interface IPdfDocumentProps extends IDocumentProps, IPageProps {\r\n  showAllPages?: boolean;\r\n  activeBboxIndex?: number;\r\n  bboxes: IBboxLocation[];\r\n  colorScheme?: IColorScheme;\r\n  onBboxesParsed?(pages: number[]): void;\r\n  onPageChange?(page: number): void;\r\n  onWarning?(warningCode: string): void;\r\n}\r\n\r\nconst PdfDocument: FC<IPdfDocumentProps> = (props) => {\r\n  const { page, setPage, maxPage, setMaxPage, scrollIntoPage, setScrollIntoPage } = useContext(ViewerContext);\r\n  const { bboxes = [] } = props;\r\n  const [loaded, setLoaded] = useState(false);\r\n  const [structureTree, setStructureTree] = useState({});\r\n  const [bboxMap, setBboxMap] = useState({});\r\n  const [pagesByViewport, setPagesByViewport] = useState<number[]>([]);\r\n  const [ratioArray, setRatioArray] = useState<number[]>([]);\r\n  const [defaultHeight, setDefaultHeight] = useState(0);\r\n  const [defaultWidth, setDefaultWidth] = useState(0);\r\n  const [selectedPage, setSelectedPage] = useState<number | undefined>(undefined);\r\n  const activeBbox = useMemo(() => {\r\n    return props.activeBboxIndex !== undefined ? bboxes[props.activeBboxIndex] : null\r\n  }, [props.activeBboxIndex, bboxes]);\r\n  const shownPages: number[] = useMemo(() => {\r\n    if (props.showAllPages) {\r\n      return Array.from(\r\n        new Array(maxPage),\r\n        (_el, index) => index + 1,\r\n      );\r\n    }\r\n\r\n    return [props.page || 1];\r\n  }, [maxPage, props.showAllPages, props.page]);\r\n\r\n  useEffect(() => {\r\n    setBboxMap(buildBboxMap(bboxes, structureTree));\r\n    props.onBboxesParsed?.(getBboxPages(bboxes, structureTree));\r\n  }, [bboxes, structureTree]);\r\n\r\n  useEffect(() => {\r\n    if ((props.activeBboxIndex ?? false) === false) {\r\n      return;\r\n    }\r\n    let bboxPage = 0;\r\n    for (const [key, value] of Object.entries(bboxMap)) {\r\n      if (_.find(value as AnyObject[], { index: props.activeBboxIndex })) {\r\n        bboxPage = parseInt(key);\r\n        break;\r\n      }\r\n    }\r\n    if (bboxPage > 0 && !activeBboxInViewport()) {\r\n      setScrollIntoPage(bboxPage);\r\n      // To be sure that page is loaded before scrolling to the active bbox\r\n      setTimeout(() => scrollToActiveBbox(), 100);\r\n    }\r\n  }, [props.activeBboxIndex, bboxMap])\r\n\r\n  useEffect(() => {\r\n    if (activeBbox) {\r\n      const selectedPage = getSelectedPageByLocation(activeBbox.location);\r\n      if (selectedPage > -1) {\r\n        setPage(selectedPage);\r\n      }\r\n      setSelectedPage(selectedPage);\r\n    } else {\r\n      setSelectedPage(undefined);\r\n    }\r\n  }, [activeBbox]);\r\n\r\n  const onDocumentLoadSuccess = useCallback(async (data: IDocumentData) => {\r\n    setStructureTree(data._pdfInfo.structureTree);\r\n    const pageData = await data.getPage(1);\r\n    setDefaultHeight(pageData.view[3]);\r\n    setDefaultWidth(pageData.view[2]);\r\n    setMaxPage(data.numPages);\r\n    setLoaded(true);\r\n    props.onLoadSuccess?.(data);\r\n  }, [props.onLoadSuccess, bboxes]);\r\n  const onPageLoadSuccess = useCallback((data: PDFPageProxy) => {\r\n    props.onPageLoadSuccess?.(data);\r\n  }, [props.onPageLoadSuccess]);\r\n\r\n  const onPageInViewport = useCallback((page: number, intersection: { isIntersecting: boolean, intersectionRatio: number }) => {\r\n    if (props.showAllPages) {\r\n      setPageByViewport(page, intersection);\r\n    } else {\r\n      setPage(page);\r\n    }\r\n  }, [maxPage, props.showAllPages]);\r\n  const onBboxClick = useCallback((data: OrNull<TSelectedBboxData>) => {\r\n      props.onBboxClick?.(data);\r\n    }, []);\r\n\r\n  const setPageByViewport = useMemo(() => (newPage: number, intersection: { isIntersecting: boolean, intersectionRatio: number }) => {\r\n    const { isIntersecting, intersectionRatio } = intersection;\r\n    if (isIntersecting) {\r\n      if (!pagesByViewport.includes(newPage)) {\r\n        pagesByViewport.push(newPage);\r\n        ratioArray.push(intersectionRatio);\r\n        setPagesByViewport(pagesByViewport);\r\n        setRatioArray(ratioArray);\r\n      } else {\r\n        ratioArray[pagesByViewport.indexOf(newPage)] = intersectionRatio;\r\n        setRatioArray(ratioArray);\r\n      }\r\n    } else {\r\n      if (pagesByViewport.includes(newPage)) {\r\n        const prevPageIndex = pagesByViewport.indexOf(newPage);\r\n        pagesByViewport.splice(prevPageIndex, 1);\r\n        setPagesByViewport(pagesByViewport);\r\n        ratioArray.splice(prevPageIndex, 1);\r\n        setRatioArray(ratioArray);\r\n      }\r\n    }\r\n\r\n    let newPageIndex = -1;\r\n    pagesByViewport.forEach((_pageFromViewport, index) => {\r\n      if (newPageIndex === -1) {\r\n        newPageIndex = index;\r\n      }\r\n\r\n      if (ratioArray[newPageIndex] < ratioArray[index]) {\r\n        newPageIndex = index;\r\n      }\r\n    });\r\n\r\n    if (newPageIndex !== -1 && pagesByViewport[newPageIndex]) {\r\n      setPage(pagesByViewport[newPageIndex]);\r\n      if (scrollIntoPage) {\r\n        setScrollIntoPage(0);\r\n      }\r\n    }\r\n  }, [pagesByViewport, page, ratioArray, scrollIntoPage]);\r\n  useDebounce(() => {\r\n    if (props.page !== page) props.onPageChange?.(page)\r\n  }, 30, [page]);\r\n\r\n  useEffect(() => {\r\n    if (page !== props.page) {\r\n      setPage(props.page || 1);\r\n      if (props.showAllPages) {\r\n        setScrollIntoPage(props.page);\r\n      }\r\n    }\r\n  }, [props.page, props.showAllPages]);\r\n\r\n  useEffect(() => {\r\n    setLoaded(false);\r\n    setPagesByViewport([]);\r\n    setRatioArray([]);\r\n    setDefaultHeight(0);\r\n    setDefaultWidth(0);\r\n    setMaxPage(0);\r\n    setPage(1);\r\n  }, [props.file]);\r\n\r\n  return (\r\n    <Document\r\n      className=\"pdf-document\"\r\n      file={props.file}\r\n      onLoadSuccess={onDocumentLoadSuccess}\r\n      onLoadError={props.onLoadError}\r\n      externalLinkTarget={props.externalLinkTarget}\r\n      error={props.error}\r\n      loading={props.loading}\r\n      noData={props.noData}\r\n      onItemClick={props.onItemClick}\r\n      rotate={props.rotate}\r\n      options={{\r\n        workerSrc: pdfjsWorker,\r\n      }}\r\n    >\r\n      {useMemo(() => loaded ? shownPages.map((page) =>\r\n        <PdfPage\r\n          defaultHeight={defaultHeight}\r\n          defaultWidth={defaultWidth}\r\n          key={page}\r\n          page={page}\r\n          pageError={props.pageError}\r\n          inputRef={props.inputRef}\r\n          height={props.height}\r\n          width={props.width}\r\n          pageLoading={props.pageLoading}\r\n          renderAnnotationLayer={props.renderAnnotationLayer}\r\n          renderInteractiveForms={props.renderInteractiveForms}\r\n          renderTextLayer={props.renderTextLayer}\r\n          scale={props.scale}\r\n          onPageLoadError={props.onPageLoadError}\r\n          onPageLoadSuccess={onPageLoadSuccess}\r\n          onPageRenderError={props.onPageRenderError}\r\n          onPageRenderSuccess={props.onPageRenderSuccess}\r\n          onGetAnnotationsSuccess={props.onGetAnnotationsSuccess}\r\n          onGetAnnotationsError={props.onGetAnnotationsError}\r\n          onGetTextSuccess={props.onGetTextSuccess}\r\n          onGetTextError={props.onGetTextError}\r\n          onPageInViewport={onPageInViewport}\r\n          bboxList={bboxMap[page]}\r\n          groupId={bboxes[props.activeBboxIndex as number]?.groupId}\r\n          activeBboxIndex={props.activeBboxIndex}\r\n          onBboxClick={onBboxClick}\r\n          colorScheme={props.colorScheme}\r\n          isPageSelected={selectedPage === page}\r\n          onWarning={props.onWarning}\r\n        />\r\n      ) : null, [loaded, shownPages, defaultHeight, defaultWidth, bboxMap, props, selectedPage])}\r\n    </Document>\r\n  );\r\n}\r\n\r\nexport default memo(PdfDocument);\r\n","import React, { FC } from 'react';\r\n\r\nimport PdfDocument, { IPdfDocumentProps } from './components/pdfDocument/PdfDocument';\r\nimport ViewerProvider from './components/viewerContext/ViewerContext';\r\n\r\nimport './styles.scss'\r\n\r\nexport interface IBboxLocation {\r\n  page: number;\r\n  location: string;\r\n  groupId?: string;\r\n}\r\n\r\ninterface IPdfViewerProps extends IPdfDocumentProps {\r\n  bboxes: IBboxLocation[];\r\n  className?: string\r\n}\r\n\r\nconst App: FC<IPdfViewerProps> = (props) => {\r\n  const { className = '', bboxes = [], ...pdfProps } = props;\r\n  return (\r\n    <ViewerProvider>\r\n      <div className={`pdf-viewer ${className}`}>\r\n        <PdfDocument {...pdfProps} bboxes={bboxes}/>\r\n      </div>\r\n    </ViewerProvider>\r\n  );\r\n}\r\n\r\nexport default App\r\n"],"names":["bboxBorderHover","styled","templateObject_1","useMemo","React","memo","createContext","useState","_","useContext","useRef","useIntersection","useCallback","useEffect","Page","Bbox","useDebounce","Document","pdfjsWorker","PdfPage","PdfDocument"],"mappings":"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"}