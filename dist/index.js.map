{"version":3,"file":"index.js","sources":["../src/components/bbox/Bbox.tsx","../src/components/viewerContext/ViewerContext.tsx","../src/components/pdfPage/PdfPage.tsx","../src/components/pdfDocument/PdfDocument.tsx","../src/controls/input/enums/inputSize.ts","../src/controls/input/InputControl.tsx","../src/controls/button/ButtonControl.tsx","../src/controls/select/enums/selectSize.ts","../src/controls/select/SelectControl.tsx","../src/controls/checkbox/CheckboxControl.tsx","../src/components/toolbar/Toolbar.tsx","../src/components/list/listItem/ListItems.tsx","../src/components/list/List.tsx","../src/components/bboxPanel/BboxPanel.tsx","../src/index.tsx"],"sourcesContent":["import React, {FC, memo} from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport { TBbox } from '../../types/bbox';\r\n\r\nimport './bbox.scss';\r\n\r\ninterface IBboxProps {\r\n  bbox: TBbox;\r\n  scale: number;\r\n  selected?: boolean;\r\n  onClick?(e: any): void;\r\n}\r\n\r\ninterface IBboxDivProps {\r\n  left: number;\r\n  top: number;\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\nconst BboxDiv = styled.div`\r\n  left: ${(props: IBboxDivProps) => props.left}px;\r\n  top: ${(props: IBboxDivProps) => props.top}px;\r\n  height: ${(props: IBboxDivProps) => props.height}px;\r\n  width: ${(props: IBboxDivProps) => props.width}px;\r\n`;\r\n\r\nconst Bbox: FC<IBboxProps> = (props) => {\r\n  const [left, top, width, height]  = props.bbox;\r\n\r\n  return <BboxDiv className={`pdf-bbox ${props.selected && 'pdf-bbox_selected'}`}\r\n                  left={left * props.scale}\r\n                  top={top * props.scale}\r\n                  width={width * props.scale}\r\n                  height={height * props.scale}\r\n                  onClick={props.onClick}\r\n  />;\r\n};\r\n\r\nexport default memo(Bbox);\r\n","import React, {FC, createContext, useState } from 'react';\r\nimport {useDebounce} from \"react-use\";\r\n\r\nexport const ViewerContext = createContext({} as {\r\n  page: number,\r\n  setPage(page: number): void,\r\n  maxPage: number,\r\n  setMaxPage(page: number): void,\r\n  scrollIntoPage: number,\r\n  setScrollIntoPage(page: number): void,\r\n  showBboxes: boolean,\r\n  setShowBboxes(show: boolean): void,\r\n});\r\n\r\nconst ViewerProvider: FC = (props) => {\r\n  const [tempPage, setTempPage] = useState(0);\r\n  const [page, setPage] = useState(0);\r\n  const [scrollIntoPage, setScrollIntoPage] = useState<number>(0);\r\n  const [maxPage, setMaxPage] = useState(0);\r\n  const [showBboxes, setShowBboxes] = useState(true);\r\n\r\n  useDebounce(\r\n    () => {\r\n      setPage(tempPage);\r\n    },\r\n    30,\r\n    [tempPage]\r\n  );\r\n\r\n  const context = {\r\n    page,\r\n    setPage: setTempPage,\r\n    maxPage,\r\n    setMaxPage,\r\n    scrollIntoPage,\r\n    setScrollIntoPage,\r\n    showBboxes,\r\n    setShowBboxes,\r\n  };\r\n\r\n  return <ViewerContext.Provider value={context}>{props.children}</ViewerContext.Provider>;\r\n};\r\n\r\nexport default ViewerProvider;\r\n","import React, {FC, useCallback, useState, useRef, memo, useEffect, useContext,} from 'react';\r\nimport { Page } from 'react-pdf';\r\nimport { useIntersection } from 'use-intersection';\r\nimport styled from 'styled-components';\r\n\r\nimport Bbox from '../bbox/Bbox';\r\nimport { IPageProps } from './IPageProps';\r\nimport { TBbox } from '../../types/bbox';\r\nimport {ViewerContext} from '../viewerContext/ViewerContext';\r\n\r\nimport './pdfPage.scss';\r\n\r\ninterface IPdfPageProps extends IPageProps {\r\n  bboxList?: TBbox[];\r\n  defaultHeight?: number;\r\n  defaultWidth?: number;\r\n  onPageInViewport?(page: number, data: { isIntersecting?: boolean, intersectionRatio?: number }): void;\r\n}\r\n\r\nconst StyledPdfPage = styled.div`\r\n  min-height: ${(props: { height?: number, width?: number, scale: number }) => props.height ? props.height*props.scale + 'px' : 'auto'};\r\n  min-width: ${(props: { height?: number, width?: number, scale: number }) => props.width ? props.width*props.scale + 'px' : 'auto'};\r\n`;\r\n\r\nconst PdfPage: FC<IPdfPageProps> = (props) => {\r\n  const { scrollIntoPage, setScrollIntoPage, showBboxes } = useContext(ViewerContext);\r\n  const { bboxList = [], scale = 1 } = props;\r\n  const intersectionRef = useRef(null);\r\n  const [loaded, setLoaded] = useState(false);\r\n  const [isRendered, setIsRendered] = useState(false);\r\n  const [isIntersecting, setIsIntersecting] = useState(false);\r\n  const [intersectionRatio, setIntersectionRatio] = useState(0);\r\n  useIntersection(intersectionRef, {\r\n    threshold: [.2, .4, .5, .6, .8, 1],\r\n  }, (entry) => {\r\n    if (isIntersecting !== entry.isIntersecting) {\r\n      setIsIntersecting(entry.isIntersecting);\r\n    }\r\n    if (intersectionRatio !== entry.intersectionRatio) {\r\n      setIntersectionRatio(entry.intersectionRatio);\r\n    }\r\n  });\r\n\r\n  const onPageClick = useCallback(() => {\r\n    props.onBboxClick?.(null);\r\n  }, []);\r\n  const onBboxClick = useCallback((index) => (e: Event) => {\r\n    e.stopPropagation();\r\n    props.onBboxClick?.({ page: props.page, index })\r\n  }, [props.onBboxClick]);\r\n  const onPageRenderSuccess = useCallback(() => {\r\n    setIsRendered(true);\r\n    props.onPageRenderSuccess?.();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!loaded && isIntersecting) {\r\n      setLoaded(true);\r\n    }\r\n    props.onPageInViewport?.(props.page, { isIntersecting, intersectionRatio });\r\n  }, [isIntersecting, intersectionRatio, loaded])\r\n  useEffect(() => {\r\n    if (scrollIntoPage === props.page) {\r\n      (intersectionRef.current as unknown as HTMLElement)?.scrollIntoView();\r\n      setScrollIntoPage(0);\r\n    }\r\n  }, [scrollIntoPage]);\r\n  const isBboxSelected = (index: number) => props.activeBbox === index;\r\n\r\n  return (\r\n    <StyledPdfPage\r\n      className=\"pdf-page pdf-page_rendered\"\r\n      data-page={props.page}\r\n      onClick={onPageClick}\r\n      height={!isRendered ? props.defaultHeight : undefined}\r\n      width={!isRendered ? props.defaultWidth : undefined}\r\n      scale={scale}\r\n      ref={intersectionRef}\r\n    >\r\n      {loaded ? <>\r\n        <Page\r\n          pageNumber={props.page}\r\n          error={props.pageError}\r\n          height={props.height}\r\n          width={props.width}\r\n          loading={props.pageLoading}\r\n          inputRef={props.inputRef}\r\n          renderAnnotationLayer={props.renderAnnotationLayer}\r\n          renderInteractiveForms={props.renderInteractiveForms}\r\n          renderTextLayer={props.renderTextLayer}\r\n          scale={props.scale}\r\n          onLoadError={props.onPageLoadError}\r\n          onLoadProgress={props.onPageLoadProgress}\r\n          onLoadSuccess={props.onPageLoadSuccess}\r\n          onRenderError={props.onPageRenderError}\r\n          onRenderSuccess={onPageRenderSuccess}\r\n          onGetAnnotationsSuccess={props.onGetAnnotationsSuccess}\r\n          onGetAnnotationsError={props.onGetAnnotationsError}\r\n          onGetTextSuccess={props.onGetTextSuccess}\r\n          onGetTextError={props.onGetTextError}\r\n        />\r\n        {showBboxes && isRendered ? bboxList.map((bbox: TBbox, index) => (\r\n          <Bbox key={index} bbox={bbox} onClick={onBboxClick(index)} selected={isBboxSelected(index)} scale={scale} />\r\n        )) : null}\r\n      </> : null}\r\n    </StyledPdfPage>\r\n  );\r\n}\r\n\r\nexport default memo(PdfPage);\r\n","import React, {FC, memo, useCallback, useMemo, useState, useContext, useEffect} from 'react';\r\nimport { Document, pdfjs } from 'react-pdf';\r\nimport { PDFDocumentProxy } from 'pdfjs-dist';\r\n\r\nimport { IDocumentProps } from './IDocumentProps';\r\nimport { IPageProps } from '../pdfPage/IPageProps';\r\nimport PdfPage from '../pdfPage/PdfPage';\r\nimport { TBbox } from '../../types/bbox';\r\nimport { PDFPageProxy } from 'react-pdf/dist/Page';\r\nimport {ViewerContext} from '../viewerContext/ViewerContext';\r\n\r\nimport './pdfDocument.scss';\r\n\r\nexport interface IPdfDocumentProps extends IDocumentProps, IPageProps {\r\n  showAllPages?: boolean;\r\n  activePage?: number;\r\n  activeBboxIndex?: number;\r\n  bboxMap?: {\r\n    [key: number]: TBbox[]\r\n  },\r\n}\r\n\r\nconst PdfDocument: FC<IPdfDocumentProps> = (props) => {\r\n  // TODO: Add input param for worker path\r\n  pdfjs.GlobalWorkerOptions.workerSrc = useMemo(() => `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`, []);\r\n  const { page, setPage, maxPage, setMaxPage } = useContext(ViewerContext);\r\n  const { bboxMap = {} } = props;\r\n  const [loaded, setLoaded] = useState(false);\r\n  const [pagesByViewport, setPagesByViewport] = useState<number[]>([]);\r\n  const [ratioArray, setRatioArray] = useState<number[]>([]);\r\n  const [defaultHeight, setDefaultHeight] = useState(0);\r\n  const [defaultWidth, setDefaultWidth] = useState(0);\r\n  const shownPages: number[] = useMemo(() => {\r\n    if (props.showAllPages) {\r\n      return Array.from(\r\n        new Array(maxPage),\r\n        (_el, index) => index + 1,\r\n      );\r\n    }\r\n\r\n    return [props.page || 1];\r\n  }, [maxPage, props.showAllPages, props.page]);\r\n\r\n  const onDocumentLoadSuccess = useCallback(async (data: PDFDocumentProxy) => {\r\n    const pageData = await data.getPage(1);\r\n    setDefaultHeight(pageData.view[3]);\r\n    setDefaultWidth(pageData.view[2]);\r\n    setMaxPage(data.numPages);\r\n    setLoaded(true);\r\n\r\n    props.onLoadSuccess?.(data);\r\n  }, [props.onLoadSuccess]);\r\n  const onPageLoadSuccess = useCallback((data: PDFPageProxy) => {\r\n    props.onPageLoadSuccess?.(data);\r\n  }, [props.onPageLoadSuccess]);\r\n\r\n  const onPageInViewport = useCallback((page: number, intersection: { isIntersecting: boolean, intersectionRatio: number }) => {\r\n    if (props.showAllPages) {\r\n      setPageByViewport(page, intersection);\r\n    } else {\r\n      setPage(page);\r\n    }\r\n  }, [maxPage, props.showAllPages]);\r\n  const getSelectedBbox = useMemo(() => (page: number) => props.activePage === page ? props.activeBboxIndex : undefined, [props.activeBboxIndex, props.activePage]);\r\n  const onBboxClick = useCallback((data) => {\r\n      props.onBboxClick?.(data);\r\n    }, []);\r\n\r\n  const setPageByViewport = useMemo(() => (newPage: number, intersection: { isIntersecting: boolean, intersectionRatio: number }) => {\r\n    const { isIntersecting, intersectionRatio } = intersection;\r\n    if (isIntersecting) {\r\n      if (!pagesByViewport.includes(newPage)) {\r\n        pagesByViewport.push(newPage);\r\n        ratioArray.push(intersectionRatio);\r\n        setPagesByViewport(pagesByViewport);\r\n        setRatioArray(ratioArray);\r\n      } else {\r\n        ratioArray[pagesByViewport.indexOf(newPage)] = intersectionRatio;\r\n        setRatioArray(ratioArray);\r\n      }\r\n    } else {\r\n      if (pagesByViewport.includes(newPage)) {\r\n        const prevPageIndex = pagesByViewport.indexOf(newPage);\r\n        pagesByViewport.splice(prevPageIndex, 1);\r\n        setPagesByViewport(pagesByViewport);\r\n        ratioArray.splice(prevPageIndex, 1);\r\n        setRatioArray(ratioArray);\r\n      }\r\n    }\r\n\r\n    let newPageIndex = -1;\r\n    pagesByViewport.forEach((_pageFromViewport, index) => {\r\n      if (newPageIndex === -1) {\r\n        newPageIndex = index;\r\n      }\r\n\r\n      if (ratioArray[newPageIndex] < ratioArray[index]) {\r\n        newPageIndex = index;\r\n      }\r\n    });\r\n\r\n    if (newPageIndex !== -1 && pagesByViewport[newPageIndex]) {\r\n      setPage(pagesByViewport[newPageIndex]);\r\n    }\r\n  }, [pagesByViewport, page, ratioArray]);\r\n\r\n  useEffect(() => {\r\n    if (page !== props.page) {\r\n      setPage(props.page || 1);\r\n    }\r\n  }, [props.page]);\r\n\r\n  useEffect(() => {\r\n    setLoaded(false);\r\n    setPagesByViewport([]);\r\n    setRatioArray([]);\r\n    setDefaultHeight(0);\r\n    setDefaultWidth(0);\r\n    setMaxPage(0);\r\n    setPage(1);\r\n  }, [props.file]);\r\n\r\n  return (\r\n    <Document\r\n      className=\"pdf-document\"\r\n      file={props.file}\r\n      onLoadSuccess={onDocumentLoadSuccess}\r\n      onLoadError={props.onLoadError}\r\n      externalLinkTarget={props.externalLinkTarget}\r\n      error={props.error}\r\n      loading={props.loading}\r\n      noData={props.noData}\r\n      onItemClick={props.onItemClick}\r\n      rotate={props.rotate}\r\n    >\r\n      {useMemo(() => loaded ? shownPages.map((page) =>\r\n        <PdfPage\r\n          defaultHeight={defaultHeight}\r\n          defaultWidth={defaultWidth}\r\n          key={page}\r\n          page={page}\r\n          pageError={props.pageError}\r\n          inputRef={props.inputRef}\r\n          height={props.height}\r\n          width={props.width}\r\n          pageLoading={props.pageLoading}\r\n          renderAnnotationLayer={props.renderAnnotationLayer}\r\n          renderInteractiveForms={props.renderInteractiveForms}\r\n          renderTextLayer={props.renderTextLayer}\r\n          scale={props.scale}\r\n          onPageLoadError={props.onPageLoadError}\r\n          onPageLoadProgress={props.onPageLoadProgress}\r\n          onPageLoadSuccess={onPageLoadSuccess}\r\n          onPageRenderError={props.onPageRenderError}\r\n          onPageRenderSuccess={props.onPageRenderSuccess}\r\n          onGetAnnotationsSuccess={props.onGetAnnotationsSuccess}\r\n          onGetAnnotationsError={props.onGetAnnotationsError}\r\n          onGetTextSuccess={props.onGetTextSuccess}\r\n          onGetTextError={props.onGetTextError}\r\n          onPageInViewport={onPageInViewport}\r\n          bboxList={bboxMap[page]}\r\n          activeBbox={getSelectedBbox(page)}\r\n          onBboxClick={onBboxClick}\r\n        />\r\n      ) : null, [loaded, shownPages, defaultHeight, defaultWidth, bboxMap, props])}\r\n    </Document>\r\n  );\r\n}\r\n\r\nexport default memo(PdfDocument);\r\n","export enum InputSize {\r\n  Sm = '32px',\r\n  Md = '64px',\r\n  Lg = '128px',\r\n  Auto = 'Auto',\r\n}\r\n","import React, {FC, useCallback, useEffect, useState, useRef } from 'react';\r\nimport styled from 'styled-components';\r\nimport { useKey } from 'react-use';\r\n\r\nimport {InputSize} from './enums/inputSize';\r\nimport {OrNull} from '../../types/generics';\r\n\r\nimport './inputControl.scss';\r\n\r\ninterface IInputProps {\r\n  value?: string | number;\r\n  defaultValue?: string | number;\r\n  size?: InputSize;\r\n  onChange?(value: string | number): void;\r\n  onBlur?(value: string | number): void;\r\n  onEnter?(value: string | number): void;\r\n}\r\n\r\nconst StyledInput = styled.input`\r\n  width: ${(props: { width: string }) => props.width};\r\n`;\r\n\r\nconst InputControl: FC<IInputProps> = (props) => {\r\n  const [value, setValue] = useState(props.defaultValue || '');\r\n  const inputRef = useRef<OrNull<HTMLInputElement>>(null);\r\n  const { size = InputSize.Auto } = props;\r\n  const onChange = useCallback((e) => {\r\n    if (!props.value) {\r\n      setValue(e.target.value);\r\n    }\r\n    props.onChange?.(e.target.value);\r\n  }, [props.onChange]);\r\n  const onBlur = useCallback((e) => {\r\n    props.onBlur?.(e.target.value);\r\n  }, [props.onBlur]);\r\n\r\n  if (props.onEnter) {\r\n    useKey('Enter', () => props.onEnter?.(inputRef?.current?.value || ''));\r\n  }\r\n\r\n  useEffect(() => {\r\n    setValue(props.defaultValue || '');\r\n  }, [props.defaultValue]);\r\n\r\n  return (\r\n    <StyledInput ref={inputRef} onBlur={onBlur} className=\"viewer-input\" value={props.value || value} width={size} onChange={onChange} />\r\n  );\r\n}\r\n\r\nexport default InputControl;\r\n","import React, {FC} from 'react';\r\n\r\nimport './buttonControl.scss';\r\n\r\ninterface IButtonProps {\r\n  onClick?(): void;\r\n  disabled?: boolean;\r\n}\r\n\r\nconst ButtonControl: FC<IButtonProps> = (props) => {\r\n  return (\r\n    <button disabled={props.disabled} className=\"viewer-btn\" onClick={props.onClick}>{props.children}</button>\r\n  );\r\n}\r\n\r\nexport default ButtonControl;\r\n","export enum SelectSize {\r\n  Sm = '32px',\r\n  Md = '64px',\r\n  Lg = '128px',\r\n  Auto = 'Auto',\r\n}\r\n","import React, {FC, useCallback} from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport {SelectSize} from './enums/selectSize';\r\nimport {TSelectOption} from '../../types/selectOption';\r\n\r\nimport './selectControl.scss';\r\n\r\ninterface ISelectProps {\r\n  size?: SelectSize;\r\n  value?: string | number;\r\n  options: TSelectOption[];\r\n  onChange(value: string): void;\r\n}\r\n\r\nconst StyledSelect = styled.select`\r\n  width: ${(props: { width: string }) => props.width};\r\n`;\r\n\r\nconst SelectControl: FC<ISelectProps> = (props) => {\r\n  const { size = SelectSize.Md } = props;\r\n  const onChange = useCallback((e) => {\r\n    props.onChange(e.target.value);\r\n  }, []);\r\n\r\n  return (\r\n    <StyledSelect className=\"viewer-select\" width={size} value={props.value} onChange={onChange}>\r\n      {props.options.map((option) =>\r\n        <option key={option.value} value={option.value}>{option.label}</option>\r\n      )}\r\n    </StyledSelect>\r\n  )\r\n}\r\n\r\nexport default SelectControl;\r\n","import React, {FC, useCallback} from 'react';\r\n\r\nimport './checkboxControl.scss';\r\n\r\ninterface ICheckboxProps {\r\n  label?: string;\r\n  checked?: boolean;\r\n  onChange(checked: boolean): void;\r\n}\r\n\r\nconst CheckboxControl: FC<ICheckboxProps> = (props) => {\r\n  const { label = '' } = props;\r\n  const onChange = useCallback((e) => {\r\n    props.onChange(e.target.checked);\r\n  }, []);\r\n  return (\r\n    <div className={`viewer-checkbox ${props.checked ? 'viewer-checkbox_checked' : ''}`}>\r\n      <label className=\"viewer-checkbox__label\">\r\n        <input\r\n          className=\"viewer-checkbox__control\"\r\n          type=\"checkbox\"\r\n          checked={props.checked}\r\n          onChange={onChange} />\r\n        {label}\r\n      </label>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CheckboxControl;\r\n","import React, {FC, memo, useCallback, useContext, useEffect, useMemo, useState} from 'react';\r\n\r\nimport {ViewerContext} from '../viewerContext/ViewerContext';\r\nimport InputControl from '../../controls/input/InputControl';\r\nimport {InputSize} from '../../controls/input/enums/inputSize';\r\nimport ButtonControl from '../../controls/button/ButtonControl';\r\n\r\nimport './toolbar.scss';\r\nimport SelectControl from \"../../controls/select/SelectControl\";\r\nimport {TSelectOption} from \"../../types/selectOption\";\r\nimport CheckboxControl from \"../../controls/checkbox/CheckboxControl\";\r\n\r\nexport interface IToolbarProps {\r\n  scale?: number;\r\n  showAllPages?: boolean;\r\n  onPageChange?(page: number): void;\r\n  onScaleChange?(scale: number): void;\r\n}\r\n\r\nconst Toolbar: FC<IToolbarProps> = (props) => {\r\n  const { scale = 1 } = props;\r\n  const { page, setPage, setScrollIntoPage, maxPage, showBboxes, setShowBboxes } = useContext(ViewerContext);\r\n  const scaleOptions: TSelectOption[] = useMemo(() => {\r\n    return [\r\n      { value: .5, label: '50%' },\r\n      { value: .75, label: '75%' },\r\n      { value: 1, label: '100%' },\r\n      { value: 1.25, label: '125%' },\r\n      { value: 1.5, label: '150%' },\r\n    ];\r\n  }, []);\r\n  const [pageValue, setPageValue] = useState<number>(page);\r\n  const onNextPage = useCallback(() => {\r\n    if (props.showAllPages) {\r\n      setScrollIntoPage(page + 1);\r\n    } else {\r\n      setPage(page + 1);\r\n    }\r\n    props.onPageChange?.(page + 1);\r\n  }, [page, props.showAllPages, props.onPageChange]);\r\n  const onPrevPage = useCallback(() => {\r\n    if (page <= 1) {\r\n      return;\r\n    }\r\n    if (props.showAllPages) {\r\n      setScrollIntoPage(page - 1);\r\n    } else {\r\n      setPage(page - 1);\r\n    }\r\n    props.onPageChange?.(page - 1);\r\n  }, [page, props.showAllPages, props.onPageChange]);\r\n  const onPageChange = useCallback((value: string) => {\r\n    if (page !== parseInt(value)) {\r\n      if (props.showAllPages) {\r\n        setScrollIntoPage(parseInt(value));\r\n      } else {\r\n        setPage(parseInt(value));\r\n      }\r\n      props.onPageChange?.(parseInt(value));\r\n    }\r\n  }, [page]);\r\n  const onScaleChange = useCallback((value: string) => {\r\n    props.onScaleChange?.(parseFloat(value));\r\n  }, []);\r\n  const onShowBboxesChange = useCallback((checked: boolean) => {\r\n    setShowBboxes(checked);\r\n  }, []);\r\n  useEffect(() => {\r\n    setPageValue(page);\r\n  }, [page])\r\n  return (\r\n    <section className=\"pdf-toolbar\">\r\n      <div className=\"pdf-toolbar__area pdf-toolbar__area_left\">\r\n        <ButtonControl disabled={pageValue < 2} onClick={onPrevPage}>Prev page</ButtonControl>\r\n        <ButtonControl disabled={pageValue === maxPage} onClick={onNextPage}>Next page</ButtonControl>\r\n        <InputControl defaultValue={pageValue} size={InputSize.Sm} onBlur={onPageChange} onEnter={onPageChange} />\r\n        <span className=\"pdf-toolbar__label\"> / {maxPage}</span>\r\n      </div>\r\n      <div className=\"pdf-toolbar__area pdf-toolbar__area_center\">\r\n        <SelectControl options={scaleOptions} onChange={onScaleChange} value={scale}/>\r\n      </div>\r\n      <div className=\"pdf-toolbar__area pdf-toolbar__area_right\">\r\n        <CheckboxControl label=\"Show bboxes\" onChange={onShowBboxesChange} checked={showBboxes} />\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default memo(Toolbar);\r\n","import React, {FC, useMemo} from 'react';\r\n\r\nimport './listItem.scss';\r\n\r\nexport interface IListItemProps {\r\n  text: string;\r\n  title?: string;\r\n  isActive?: boolean;\r\n  isOpen?: boolean;\r\n  children?: IListItemProps[];\r\n  onClick?(data: any): void;\r\n}\r\n\r\nconst ListItem: FC<IListItemProps> = (props) => {\r\n  const { text, title = '', isActive = false, onClick } = props;\r\n  const className = useMemo(() => {\r\n    const classList = ['viewer-list-item'];\r\n    if (isActive) {\r\n      classList.push('viewer-list-item_active');\r\n    }\r\n\r\n    if (props.children) {\r\n      switch (props.isOpen) {\r\n        case true:\r\n          classList.push('viewer-list-item_opened');\r\n          break\r\n        default:\r\n          classList.push('viewer-list-item_closed');\r\n          break\r\n      }\r\n    }\r\n\r\n    return classList.join(' ');\r\n  }, [isActive, props.isOpen]);\r\n  return (\r\n    <li className={className}\r\n        onClick={onClick}\r\n    >\r\n      {title ? <h4 className=\"viewer-list-item__title\">{title}</h4> : null}\r\n      <span className=\"viewer-list-item__text\">{text}</span>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default ListItem;\r\n","import React, { FC } from 'react';\r\n\r\nimport ListItem, { IListItemProps } from './listItem/ListItems';\r\n\r\nimport './list.scss';\r\n\r\ninterface IListProps {\r\n  items?: IListItemProps[];\r\n}\r\n\r\nconst List: FC<IListProps> = (props) => {\r\n  const { items = [] } = props;\r\n  return <ul className=\"viewer-list\">\r\n    {items.map((item: IListItemProps, index) => (\r\n        <React.Fragment key={index}>\r\n          <ListItem {...item} />\r\n          {item.children && item.isOpen ? item.children.map((child, childIndex) =>\r\n            <ListItem {...child} key={index + '_' + childIndex} />\r\n          ): null}\r\n        </React.Fragment>\r\n      )\r\n    )}\r\n  </ul>;\r\n}\r\n\r\nexport default List;\r\n","import React, {FC, useContext, useMemo, useState} from 'react';\r\n\r\nimport List from '../list/List';\r\nimport {TBbox} from '../../types/bbox';\r\n\r\nimport './bboxPanel.scss';\r\nimport {OrNull} from '../../types/generics';\r\nimport {TSelectedBboxData} from '../../types/selectedBboxData';\r\nimport {ViewerContext} from \"../viewerContext/ViewerContext\";\r\nimport {IListItemProps} from \"../list/listItem/ListItems\";\r\n\r\ninterface IBboxPanelProps {\r\n  activePage?: number;\r\n  activeBboxIndex?: number;\r\n  onBboxClick?(data: OrNull<TSelectedBboxData>): void;\r\n  bboxMap?: {\r\n    [key: number]: TBbox[]\r\n  },\r\n}\r\n\r\nconst BboxPanel: FC<IBboxPanelProps> = (props) => {\r\n  const { page, setScrollIntoPage } = useContext(ViewerContext);\r\n  const { bboxMap = {} } = props;\r\n  const [openedPage, setOpenedPage] = useState(0);\r\n  const items = useMemo(() => {\r\n    let bboxList: IListItemProps[] = [];\r\n    Object.keys(bboxMap || {}).forEach((key: string) => {\r\n      const pageNumber = parseInt(key);\r\n      bboxList = [\r\n        ...bboxList,\r\n        {\r\n          title: `Page ${pageNumber}`,\r\n          text: `${bboxMap[pageNumber].length} items`,\r\n          isActive: props.activePage === pageNumber && openedPage !== pageNumber,\r\n          isOpen: openedPage === pageNumber,\r\n          onClick(e) {\r\n            e.stopPropagation();\r\n            setOpenedPage(pageNumber === openedPage ? 0 : pageNumber);\r\n          },\r\n          children: bboxMap[key].map((bbox: TBbox, index: number) => {\r\n            return {\r\n              text: `${JSON.stringify(bbox)}`,\r\n              title: '',\r\n              isActive: props.activePage === pageNumber && props.activeBboxIndex === index,\r\n              onClick: (e: Event) => {\r\n                e.stopPropagation();\r\n                if (page !== pageNumber) {\r\n                  setScrollIntoPage(pageNumber);\r\n                }\r\n                props.onBboxClick?.({page: pageNumber, index});\r\n              }\r\n            };\r\n          })\r\n        }\r\n      ];\r\n    });\r\n\r\n    return bboxList;\r\n  }, [props.bboxMap, props.activePage, props.activeBboxIndex, page, openedPage]);\r\n\r\n  return <section className=\"viewer-bbox-panel\">\r\n    <List items={items} />\r\n  </section>;\r\n}\r\n\r\nexport default BboxPanel;\r\n","import React, { FC } from 'react';\r\n\r\nimport PdfDocument, { IPdfDocumentProps } from './components/pdfDocument/PdfDocument';\r\nimport Toolbar, { IToolbarProps } from './components/toolbar/Toolbar';\r\nimport ViewerProvider from './components/viewerContext/ViewerContext';\r\nimport BboxPanel from './components/bboxPanel/BboxPanel';\r\n\r\nimport './styles.scss'\r\n\r\ninterface IPdfViewerProps extends IPdfDocumentProps, IToolbarProps {\r\n  withToolbar?: boolean;\r\n  withSidePanel?: boolean;\r\n  className?: string\r\n}\r\n\r\nconst App: FC<IPdfViewerProps> = (props) => {\r\n  const { className = '', withToolbar = false, withSidePanel = false, ...pdfProps } = props;\r\n  return (\r\n    <ViewerProvider>\r\n      <div className={`pdf-viewer ${className}`}>\r\n        {withToolbar ? (\r\n          <header className=\"pdf-viewer__header\">\r\n            <Toolbar\r\n              onPageChange={props.onPageChange}\r\n              showAllPages={props.showAllPages}\r\n              scale={props.scale}\r\n              onScaleChange={props.onScaleChange}\r\n            />\r\n          </header>\r\n        ) : null}\r\n        <section className=\"pdf-viewer__content\">\r\n          {withSidePanel ?\r\n            <BboxPanel\r\n              bboxMap={props.bboxMap}\r\n              activeBboxIndex={props.activeBboxIndex}\r\n              activePage={props.activePage}\r\n              onBboxClick={props.onBboxClick}\r\n          /> : null}\r\n          <section className=\"pdf-viewer__document-section\">\r\n            <PdfDocument {...pdfProps} />\r\n          </section>\r\n        </section>\r\n      </div>\r\n    </ViewerProvider>\r\n  );\r\n}\r\n\r\nexport default App\r\n"],"names":["styled","React","memo","createContext","useState","useDebounce","useContext","useRef","useIntersection","useCallback","useEffect","Page","Bbox","pdfjs","useMemo","Document","PdfPage","useKey","Toolbar","PdfDocument"],"mappings":"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"}