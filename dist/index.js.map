{"version":3,"file":"index.js","sources":["../src/components/bbox/Bbox.tsx","../src/components/pdfPage/pdfPage.tsx","../src/components/pdfPage/emptyPage.tsx","../src/components/pdfDocument/pdfDocument.tsx","../src/index.tsx"],"sourcesContent":["import React, { FC } from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport { TBbox } from '../../types/bbox';\r\n\r\nimport './bbox.scss';\r\n\r\ninterface IBboxProps {\r\n  bbox: TBbox;\r\n  selected?: boolean;\r\n  onClick?(e: any): void;\r\n}\r\n\r\ninterface IBboxDivProps {\r\n  left: number;\r\n  top: number;\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\nconst BboxDiv = styled.div`\r\n  left: ${(props: IBboxDivProps) => props.left}px;\r\n  top: ${(props: IBboxDivProps) => props.top}px;\r\n  height: ${(props: IBboxDivProps) => props.height}px;\r\n  width: ${(props: IBboxDivProps) => props.width}px;\r\n`;\r\n\r\nconst Bbox: FC<IBboxProps> = (props) => {\r\n  const [left, top, width, height]  = props.bbox;\r\n\r\n  return <BboxDiv className={`pdf-bbox ${props.selected && 'pdf-bbox_selected'}`}\r\n                  left={left}\r\n                  top={top}\r\n                  width={width}\r\n                  height={height}\r\n                  onClick={props.onClick}\r\n  />;\r\n};\r\n\r\nexport default Bbox;\r\n","import React, {FC, useCallback, useEffect, useState, useRef, memo} from 'react';\r\nimport { Page } from 'react-pdf';\r\nimport { useIntersection } from 'use-intersection';\r\nimport styled from 'styled-components';\r\n\r\nimport Bbox from '../bbox/Bbox';\r\nimport { IPageProps } from './IPageProps';\r\nimport { TBbox } from '../../types/bbox';\r\n\r\nimport './pdfPage.scss';\r\n\r\ninterface IPdfPageProps extends IPageProps {\r\n  bboxList?: TBbox[];\r\n  defaultHeight?: number;\r\n  defaultWidth?: number;\r\n  onPageInViewport?(page: number): void;\r\n}\r\n\r\nconst StyledPdfPage = styled.div`\r\n  min-height: ${(props: { height?: number | boolean, width?: number | boolean }) => props.height ? props.height + 'px' : 'auto'};\r\n  min-width: ${(props: { height?: number | boolean, width?: number | boolean }) => props.width ? props.width + 'px' : 'auto'};\r\n`;\r\n\r\nconst PdfPage: FC<IPdfPageProps> = (props) => {\r\n  const { bboxList = [] } = props;\r\n  const intersectionRef = useRef(null);\r\n  const [isRendered, setIsRendered] = useState(false);\r\n  const intersection = useIntersection(intersectionRef, {\r\n    once: true,\r\n  });\r\n\r\n  const onPageClick = useCallback(() => {\r\n    props.onBboxClick?.(null);\r\n  }, []);\r\n  const onBboxClick = useCallback((index) => (e: Event) => {\r\n    e.stopPropagation();\r\n    props.onBboxClick?.({ page: props.page, index })\r\n  }, [props.onBboxClick]);\r\n  const onPageRenderSuccess = useCallback(() => {\r\n    setIsRendered(true);\r\n    props.onPageRenderSuccess?.();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (intersection) {\r\n      props.onPageInViewport?.(props.page);\r\n    }\r\n  }, [intersection])\r\n  const isBboxSelected = (index: number) => props.activeBbox === index;\r\n\r\n  return (\r\n    <StyledPdfPage\r\n      className=\"pdf-page pdf-page_rendered\"\r\n      data-page={props.page}\r\n      onClick={onPageClick}\r\n      height={!isRendered ? props.defaultHeight : undefined}\r\n      width={!isRendered ? props.defaultWidth : undefined}\r\n      ref={intersectionRef}\r\n    >\r\n      <Page\r\n        pageNumber={props.page}\r\n        error={props.pageError}\r\n        height={props.height}\r\n        width={props.width}\r\n        loading={props.pageLoading}\r\n        inputRef={props.inputRef}\r\n        renderAnnotationLayer={props.renderAnnotationLayer}\r\n        renderInteractiveForms={props.renderInteractiveForms}\r\n        renderTextLayer={props.renderTextLayer}\r\n        scale={props.scale}\r\n        onLoadError={props.onPageLoadError}\r\n        onLoadProgress={props.onPageLoadProgress}\r\n        onLoadSuccess={props.onPageLoadSuccess}\r\n        onRenderError={props.onPageRenderError}\r\n        onRenderSuccess={onPageRenderSuccess}\r\n        onGetAnnotationsSuccess={props.onGetAnnotationsSuccess}\r\n        onGetAnnotationsError={props.onGetAnnotationsError}\r\n        onGetTextSuccess={props.onGetTextSuccess}\r\n        onGetTextError={props.onGetTextError}\r\n      />\r\n      {isRendered ? bboxList.map((bbox: TBbox, index) => (\r\n        <Bbox key={index} bbox={bbox} onClick={onBboxClick(index)} selected={isBboxSelected(index)} />\r\n      )) : null}\r\n    </StyledPdfPage>\r\n  );\r\n}\r\n\r\nexport default memo(PdfPage);\r\n","import React, {FC, memo, useEffect, useRef} from 'react';\r\nimport { useIntersection } from 'use-intersection';\r\nimport styled from 'styled-components';\r\n\r\nimport './pdfPage.scss';\r\n\r\ninterface IEmptyPageProps {\r\n  height?: number;\r\n  width?: number;\r\n  page: number;\r\n  onPageInViewport?(page: number): void;\r\n}\r\n\r\nconst StyledEmptyPage = styled.div`\r\n  min-height: ${(props: { height?: number, width?: number }) => props.height ? props.height + 'px' : 'auto'};\r\n  min-width: ${(props: { height?: number, width?: number }) => props.width ? props.width + 'px' : 'auto'};\r\n`;\r\n\r\nconst EmptyPage: FC<IEmptyPageProps> = (props) => {\r\n  const intersectionRef = useRef(null);\r\n  const intersection = useIntersection(intersectionRef, {\r\n    once: true,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (intersection) {\r\n      props.onPageInViewport?.(props.page);\r\n    }\r\n  }, [intersection])\r\n\r\n  return (\r\n    <StyledEmptyPage\r\n      className=\"pdf-page\"\r\n      height={props.height}\r\n      width={props.width}\r\n      data-page={props.page}\r\n      ref={intersectionRef}\r\n    />\r\n  );\r\n}\r\n\r\nexport default memo(EmptyPage);\r\n","import React, {FC, memo, useCallback, useMemo, useState} from 'react';\r\nimport { Document, pdfjs } from 'react-pdf';\r\nimport { PDFDocumentProxy } from 'pdfjs-dist';\r\n\r\nimport { IDocumentProps } from './IDocumentProps';\r\nimport { IPageProps } from '../pdfPage/IPageProps';\r\nimport PdfPage from '../pdfPage/pdfPage';\r\nimport EmptyPage from '../pdfPage/emptyPage';\r\nimport { TBbox } from '../../types/bbox';\r\nimport { PDFPageProxy } from 'react-pdf/dist/Page';\r\n\r\nimport './pdfDocument.scss';\r\n\r\nexport interface IPdfDocumentProps extends IDocumentProps, IPageProps {\r\n  showAllPages?: boolean;\r\n  activePage?: number;\r\n  activeBboxIndex?: number;\r\n  bboxMap?: {\r\n    [key: number]: TBbox[]\r\n  },\r\n}\r\n\r\nconst PdfDocument: FC<IPdfDocumentProps> = (props) => {\r\n  // TODO: Add input param for worker path\r\n  pdfjs.GlobalWorkerOptions.workerSrc = useMemo(() => `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`, []);\r\n  const { bboxMap = {} } = props;\r\n  const [numPages, setNumPages] = useState<number>(0);\r\n  const [renderedPages, setRenderedPages] = useState<number[]>([props.page || 1]);\r\n  const [defaultHeight, setDefaultHeight] = useState(0);\r\n  const [defaultWidth, setDefaultWidth] = useState(0);\r\n  const shownPages: number[] = useMemo(() => {\r\n    if (props.showAllPages) {\r\n      return Array.from(\r\n        new Array(numPages),\r\n        (_el, index) => index + 1,\r\n      );\r\n    }\r\n\r\n    return [props.page || 1];\r\n  }, [numPages, props.showAllPages]);\r\n\r\n  const onDocumentLoadSuccess = useCallback(async (data: PDFDocumentProxy) => {\r\n    const pageData = await data.getPage(1);\r\n    setDefaultHeight(pageData.view[3]);\r\n    setDefaultWidth(pageData.view[2]);\r\n    setNumPages(data.numPages);\r\n\r\n    props.onLoadSuccess?.(data);\r\n  }, [props.onLoadSuccess]);\r\n  const onPageLoadSuccess = useCallback((data: PDFPageProxy) => {\r\n    props.onPageLoadSuccess?.(data);\r\n  }, [props.onPageLoadSuccess]);\r\n\r\n  const onPageInViewport = useCallback((page: number) => {\r\n    if (!numPages || !props.showAllPages || !defaultHeight) {\r\n      return;\r\n    }\r\n    const pagesToRender = [];\r\n    if (!renderedPages.includes(page - 1) && page > 1) {\r\n      pagesToRender.push(page - 1);\r\n    }\r\n    if (!renderedPages.includes(page)) {\r\n      pagesToRender.push(page);\r\n    }\r\n    if (!renderedPages.includes(page + 1) && page < numPages) {\r\n      pagesToRender.push(page + 1);\r\n    }\r\n    setRenderedPages([ ...renderedPages, ...pagesToRender ])\r\n  }, [renderedPages, numPages, props.showAllPages]);\r\n  const isPageRendered = useMemo(() => (page: number) => renderedPages.includes(page), [renderedPages]);\r\n  const getSelectedBbox = useMemo(() => (page: number) => props.activePage === page ? props.activeBboxIndex : undefined, [props.activeBboxIndex, props.activePage]);\r\n  const onBboxClick = useCallback((data) => {\r\n      props.onBboxClick?.(data);\r\n    }, []);\r\n\r\n  return (\r\n    <Document\r\n      className=\"pdf-document\"\r\n      file={props.file}\r\n      onLoadSuccess={onDocumentLoadSuccess}\r\n      onLoadError={props.onLoadError}\r\n      externalLinkTarget={props.externalLinkTarget}\r\n      error={props.error}\r\n      loading={props.loading}\r\n      noData={props.noData}\r\n      onItemClick={props.onItemClick}\r\n      rotate={props.rotate}\r\n    >\r\n      {shownPages.map((page) =>\r\n        isPageRendered(page) ?\r\n          <PdfPage\r\n            defaultHeight={defaultHeight}\r\n            defaultWidth={defaultWidth}\r\n            key={page}\r\n            page={page}\r\n            pageError={props.pageError}\r\n            inputRef={props.inputRef}\r\n            height={props.height}\r\n            width={props.width}\r\n            pageLoading={props.pageLoading}\r\n            renderAnnotationLayer={props.renderAnnotationLayer}\r\n            renderInteractiveForms={props.renderInteractiveForms}\r\n            renderTextLayer={props.renderTextLayer}\r\n            scale={props.scale}\r\n            onPageLoadError={props.onPageLoadError}\r\n            onPageLoadProgress={props.onPageLoadProgress}\r\n            onPageLoadSuccess={onPageLoadSuccess}\r\n            onPageRenderError={props.onPageRenderError}\r\n            onPageRenderSuccess={props.onPageRenderSuccess}\r\n            onGetAnnotationsSuccess={props.onGetAnnotationsSuccess}\r\n            onGetAnnotationsError={props.onGetAnnotationsError}\r\n            onGetTextSuccess={props.onGetTextSuccess}\r\n            onGetTextError={props.onGetTextError}\r\n            onPageInViewport={onPageInViewport}\r\n            bboxList={bboxMap[page]}\r\n            activeBbox={getSelectedBbox(page)}\r\n            onBboxClick={onBboxClick}\r\n          /> :\r\n          <EmptyPage\r\n            key={page}\r\n            page={page}\r\n            width={defaultWidth}\r\n            height={defaultHeight}\r\n            onPageInViewport={onPageInViewport}\r\n          />\r\n      )}\r\n    </Document>\r\n  );\r\n}\r\n\r\nexport default memo(PdfDocument);\r\n","import React from 'react'\r\n\r\nimport PdfDocument, { IPdfDocumentProps } from './components/pdfDocument/pdfDocument';\r\n\r\nimport './styles.scss'\r\n\r\ninterface IPdfViewerProps extends IPdfDocumentProps {\r\n  className?: string\r\n}\r\n\r\nconst App: React.FC<IPdfViewerProps> = (props) => {\r\n  const { className = '', ...pdfProps } = props;\r\n  return (\r\n    <div className={`pdf-viewer ${className}`}>\r\n      <PdfDocument {...pdfProps} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App\r\n"],"names":["styled","React","useRef","useState","useIntersection","useCallback","useEffect","Page","memo","pdfjs","useMemo","Document","PdfPage","EmptyPage","PdfDocument"],"mappings":"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"}